import e from"dcv";import t,{memo as n,useEffect as r,useRef as o,useCallback as i,useMemo as a}from"react";import{applyMode as s,Mode as c,applyDensity as l,Density as d}from"@cloudscape-design/global-styles";import u from"prop-types";import m from"@cloudscape-design/components/box";import p from"@cloudscape-design/components/space-between";import f from"@cloudscape-design/components/spinner";import h from"@cloudscape-design/components/button";import g from"@cloudscape-design/components/modal";import b from"@cloudscape-design/components/textarea";import y from"@cloudscape-design/components/popover";import v from"@cloudscape-design/components/status-indicator";import w from"@cloudscape-design/components/button-dropdown";import E from"@cloudscape-design/components/tabs";import S from"@cloudscape-design/components/link";import x from"@cloudscape-design/components/grid";import O from"@cloudscape-design/components/toggle";import C from"@cloudscape-design/components/column-layout";import M from"@cloudscape-design/components/radio-group";import k from"@babel/runtime/helpers/extends";import I from"@cloudscape-design/components/select";import F from"@cloudscape-design/components/alert";import R from"@cloudscape-design/components/line-chart";import T from"@cloudscape-design/components/header";import{colorChartsPaletteCategorical1 as A,colorChartsPaletteCategorical2 as B,colorChartsPaletteCategorical3 as D,colorBackgroundContainerHeader as j,colorBorderDividerDefault as L,colorBackgroundContainerContent as P}from"@cloudscape-design/design-tokens";import _ from"@cloudscape-design/components/container";import N from"@cloudscape-design/components/badge";import $ from"@cloudscape-design/components/progress-bar";import U from"@cloudscape-design/components/icon";import z from"@cloudscape-design/components/input";import W from"@cloudscape-design/components/breadcrumb-group";import V from"@cloudscape-design/components/table";import q from"@cloudscape-design/components/pagination";import H from"react-dom";var G="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Q={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new o(r,i||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,a=new Array(i);o<i;o++)a[o]=r[o].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,o,i,a){var s=n?n+e:e;if(!this._events[s])return!1;var c,l,d=this._events[s],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,o),!0;case 5:return d.fn.call(d.context,t,r,o,i),!0;case 6:return d.fn.call(d.context,t,r,o,i,a),!0}for(l=1,c=new Array(u-1);l<u;l++)c[l-1]=arguments[l];d.fn.apply(d.context,c)}else{var m,p=d.length;for(l=0;l<p;l++)switch(d[l].once&&this.removeListener(e,d[l].fn,void 0,!0),u){case 1:d[l].fn.call(d[l].context);break;case 2:d[l].fn.call(d[l].context,t);break;case 3:d[l].fn.call(d[l].context,t,r);break;case 4:d[l].fn.call(d[l].context,t,r,o);break;default:if(!c)for(m=1,c=new Array(u-1);m<u;m++)c[m-1]=arguments[m];d[l].fn.apply(d[l].context,c)}}return!0},s.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||o&&!s.once||r&&s.context!==r||a(this,i);else{for(var c=0,l=[],d=s.length;c<d;c++)(s[c].fn!==t||o&&!s[c].once||r&&s[c].context!==r)&&l.push(s[c]);l.length?this._events[i]=1===l.length?l[0]:l:a(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(Q);const K=new(0,Q.exports),Y={on:(e,t)=>K.on(e,t),once:(e,t)=>K.once(e,t),off:(e,t)=>K.off(e,t),emit:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return K.emit(e,...n)}};Object.freeze(Y);var Z,J,X,ee={exports:{}};J=G,X=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"];function o(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(r){return"debug"===r&&(r="log"),typeof console!==t&&("trace"===r&&n?i:void 0!==console[r]?o(console,r):void 0!==console.log?o(console,"log"):e)}function s(t,n){for(var o=0;o<r.length;o++){var i=r[o];this[i]=o<t?e:this.methodFactory(i,t,n)}this.log=this.debug}function c(e,n,r){return function(){typeof console!==t&&(s.call(this,n,r),this[e].apply(this,arguments))}}function l(e,t,n){return a(e)||c.apply(this,arguments)}function d(e,n,o){var i,a=this;n=null==n?"WARN":n;var c="loglevel";function d(){var e;if(typeof window!==t&&c){try{e=window.localStorage[c]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(c)+"=");-1!==r&&(e=/^([^;]+)/.exec(n.slice(r))[1])}catch(e){}return void 0===a.levels[e]&&(e=void 0),e}}"string"==typeof e?c+=":"+e:"symbol"==typeof e&&(c=void 0),a.name=e,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=o||l,a.getLevel=function(){return i},a.setLevel=function(n,o){if("string"==typeof n&&void 0!==a.levels[n.toUpperCase()]&&(n=a.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(i=n,!1!==o&&function(e){var n=(r[e]||"silent").toUpperCase();if(typeof window!==t&&c){try{return void(window.localStorage[c]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"="+n+";"}catch(e){}}}(n),s.call(a,n,e),typeof console===t&&n<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(e){n=e,d()||a.setLevel(e,!1)},a.resetLevel=function(){a.setLevel(n,!1),function(){if(typeof window!==t&&c){try{return void window.localStorage.removeItem(c)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}()},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var u=d();null==u&&(u=n),a.setLevel(u,!1)}var u=new d,m={};u.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=m[e];return t||(t=m[e]=new d(e,u.getLevel(),u.methodFactory)),t};var p=typeof window!==t?window.log:void 0;return u.noConflict=function(){return typeof window!==t&&window.log===u&&(window.log=p),u},u.getLoggers=function(){return m},u.default=u,u},(Z=ee).exports?Z.exports=X():J.log=X();var te=ee.exports;function ne(e){return"function"==typeof e}function re(e){return null==e}function oe(e){return!re(e)&&"object"==typeof e&&!Array.isArray(e)}function ie(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ae(e,n,r){let o=n||"20px",i=r||"0";return t.createElement("div",{style:{padding:`${i} ${o}`}},e)}function se(e){return(e||window).document.documentElement.clientHeight}function ce(e){return-1!==["available","attached","streaming"].indexOf(e)}const le="Auto-hide toolbar",de="Automatically hide the toolbar and display it only moving the mouse to the top border.",ue="Auto-hide toolbar only in full screen",me="Fix the bar on the top only in windowed mode.",pe="Always display the toolbar",fe="Fix the bar on the top.",he={label:"Best responsiveness",description:"Provide most fluid experience.",minQuality:20,maxQuality:90},ge={label:"Best quality",description:"Provide best image quality.",minQuality:70,maxQuality:90},be="adaptive",ye="current",ve=[{width:1920,height:1080},{width:1440,height:900},{width:1024,height:768},{width:800,height:600}];let we;function Ee(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)")&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener&&window.matchMedia("(prefers-color-scheme: dark)").removeEventListener}function Se(){return we}Ee()&&(we=window.matchMedia("(prefers-color-scheme: dark)"));const xe=(e,t)=>{s(e.matches?c.Dark:c.Light,t)},Oe=(e,t)=>{switch(e){case"System default":we&&xe(we,t);break;case"Light mode":s(c.Light,t);break;case"Dark mode":s(c.Dark,t)}};te.getLogger("settings");let Ce={sessionId:"",authToken:"",extensionData:"",promptReconnect:!0,logLevel:"info",wss:!0,enabledChannels:[],customChannels:[],displayCodecs:[],enableQU:!0,minQuality:30,maxQuality:0,maxDisplayWidth:0,maxDisplayHeight:0,minDisplayWidth:640,minDisplayHeight:480,debugLayer:!1,clientHiDpiScaling:!0,enableWebCodecs:!0,losslessColorspace:"rgb",dynamicResolution:!0,enableShortcutEditor:!1,scaleToFit:!1,volume:100,microphone:!1,webcam:!1,macOptionToAlt:!0,macCommandToControl:!1,appearanceMode:Ee()?"System default":"Light mode",toolbarBehavior:ue,displayQuality:he.label,metricsEnabled:!1,selectedResolution:be,selectedWebcamId:null,highColorAccuracy:!1,forceKeyboardCombinations:!1,timezoneRedirectionEnabled:!1};function Me(){localStorage.setItem("dcv-settings",JSON.stringify(Ce))}let ke,Ie,Fe={},Re=[];function Te(e){Ie.queryFeature(e).then((t=>{ne(Fe[e])&&Fe[e](t)})).catch((t=>{ke.info(`[UI][Feature handler] Query for ${e} denied with message: ${t.message}`)}))}function Ae(e){e.length>0&&function(e){e.forEach((e=>{-1!==Object.keys(Fe).indexOf(e)?Te(e):(Re.push(e),ke&&ke.info(`[UI][Feature handler] No callback for feature ${e} adding to pending.`))}))}(e)}function Be(e,t){e&&ne(t)?(Fe[e]=t,ke.info(`[UI] Added feature listener for: ${e}`),ke.debug(`[UI] Callbacks ${Object.keys(Fe)}`),ke.debug(`[UI][Feature] Pending updates ${Re}`),-1!==Re.indexOf(e)&&(Te(e),Re.splice(Re.indexOf(e),1))):ke.warn("[UI] Wrong parameters for addFeatureListener")}const De={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},je={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Le={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},Pe={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},_e={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class Ne{static getFirstMatch(e,t){const n=t.match(e);return n&&n.length>0&&n[1]||""}static getSecondMatch(e,t){const n=t.match(e);return n&&n.length>1&&n[2]||""}static matchAndReturnConst(e,t,n){if(e.test(t))return n}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const t=e.split(".").splice(0,2).map((e=>parseInt(e,10)||0));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const t=e.split(".").splice(0,2).map((e=>parseInt(e,10)||0));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,t,n=!1){const r=Ne.getVersionPrecision(e),o=Ne.getVersionPrecision(t);let i=Math.max(r,o),a=0;const s=Ne.map([e,t],(e=>{const t=i-Ne.getVersionPrecision(e),n=e+new Array(t+1).join(".0");return Ne.map(n.split("."),(e=>new Array(20-e.length).join("0")+e)).reverse()}));for(n&&(a=i-Math.min(r,o)),i-=1;i>=a;){if(s[0][i]>s[1][i])return 1;if(s[0][i]===s[1][i]){if(i===a)return 0;i-=1}else if(s[0][i]<s[1][i])return-1}}static map(e,t){const n=[];let r;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n}static find(e,t){let n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){const r=e[n];if(t(r,n))return r}}static assign(e,...t){const n=e;let r,o;if(Object.assign)return Object.assign(e,...t);for(r=0,o=t.length;r<o;r+=1){const e=t[r];if("object"==typeof e&&null!==e){Object.keys(e).forEach((t=>{n[t]=e[t]}))}}return e}static getBrowserAlias(e){return De[e]}static getBrowserTypeByAlias(e){return je[e]||""}}const $e=/version\/(\d+(\.?_?\d+)+)/i,Ue=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},n=Ne.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||Ne.getFirstMatch($e,e);return n&&(t.version=n),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},n=Ne.getFirstMatch($e,e)||Ne.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},n=Ne.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||Ne.getFirstMatch($e,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},n=Ne.getFirstMatch($e,e)||Ne.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},n=Ne.getFirstMatch($e,e)||Ne.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},n=Ne.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||Ne.getFirstMatch($e,e);return n&&(t.version=n),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},n=Ne.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||Ne.getFirstMatch($e,e);return n&&(t.version=n),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},n=Ne.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||Ne.getFirstMatch($e,e);return n&&(t.version=n),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},n=Ne.getFirstMatch($e,e)||Ne.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},n=Ne.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||Ne.getFirstMatch($e,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},n=Ne.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||Ne.getFirstMatch($e,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},n=Ne.getFirstMatch($e,e)||Ne.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},n=Ne.getFirstMatch($e,e)||Ne.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},n=Ne.getFirstMatch($e,e)||Ne.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},n=Ne.getFirstMatch($e,e)||Ne.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},n=Ne.getFirstMatch($e,e)||Ne.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},n=Ne.getFirstMatch($e,e)||Ne.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},n=Ne.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||Ne.getFirstMatch($e,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=Ne.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||Ne.getFirstMatch($e,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},n=Ne.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},n=Ne.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},n=Ne.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},n=Ne.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},n=Ne.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},n=Ne.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},n=Ne.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},n=Ne.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},n=Ne.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},n=Ne.getFirstMatch($e,e)||Ne.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},n=Ne.getFirstMatch($e,e)||Ne.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},n=Ne.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},n=Ne.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||Ne.getFirstMatch($e,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},n=Ne.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||Ne.getFirstMatch($e,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},n=Ne.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},n=Ne.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},n=Ne.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},n=Ne.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||Ne.getFirstMatch($e,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},n=Ne.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},n=Ne.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){const t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe(e){const t={name:"Android Browser"},n=Ne.getFirstMatch($e,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},n=Ne.getFirstMatch($e,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},n=Ne.getFirstMatch($e,e);return n&&(t.version=n),t}},{test:[/.*/i],describe(e){const t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:Ne.getFirstMatch(t,e),version:Ne.getSecondMatch(t,e)}}}];var ze=[{test:[/Roku\/DVP/],describe(e){const t=Ne.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:Pe.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=Ne.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:Pe.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=Ne.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=Ne.getWindowsVersionName(t);return{name:Pe.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:Pe.iOS},n=Ne.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe(e){const t=Ne.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=Ne.getMacOSVersionName(t),r={name:Pe.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=Ne.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:Pe.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe(e){const t=Ne.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=Ne.getAndroidVersionName(t),r={name:Pe.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=Ne.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:Pe.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=Ne.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||Ne.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||Ne.getFirstMatch(/\bbb(\d+)/i,e);return{name:Pe.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=Ne.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:Pe.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=Ne.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:Pe.Tizen,version:t}}},{test:[/linux/i],describe:()=>({name:Pe.Linux})},{test:[/CrOS/],describe:()=>({name:Pe.ChromeOS})},{test:[/PlayStation 4/],describe(e){const t=Ne.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:Pe.PlayStation4,version:t}}}],We=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(e){const t=Ne.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:Le.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:Le.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:Le.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:Le.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:Le.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:Le.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:Le.tablet})},{test(e){const t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe(e){const t=Ne.getFirstMatch(/(ipod|iphone)/i,e);return{type:Le.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:Le.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:Le.mobile})},{test:e=>"blackberry"===e.getBrowserName(!0),describe:()=>({type:Le.mobile,vendor:"BlackBerry"})},{test:e=>"bada"===e.getBrowserName(!0),describe:()=>({type:Le.mobile})},{test:e=>"windows phone"===e.getBrowserName(),describe:()=>({type:Le.mobile,vendor:"Microsoft"})},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:()=>({type:Le.tablet})},{test:e=>"android"===e.getOSName(!0),describe:()=>({type:Le.mobile})},{test:e=>"macos"===e.getOSName(!0),describe:()=>({type:Le.desktop,vendor:"Apple"})},{test:e=>"windows"===e.getOSName(!0),describe:()=>({type:Le.desktop})},{test:e=>"linux"===e.getOSName(!0),describe:()=>({type:Le.desktop})},{test:e=>"playstation 4"===e.getOSName(!0),describe:()=>({type:Le.tv})},{test:e=>"roku"===e.getOSName(!0),describe:()=>({type:Le.tv})}],Ve=[{test:e=>"microsoft edge"===e.getBrowserName(!0),describe(e){if(/\sedg\//i.test(e))return{name:_e.Blink};const t=Ne.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:_e.EdgeHTML,version:t}}},{test:[/trident/i],describe(e){const t={name:_e.Trident},n=Ne.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:e=>e.test(/presto/i),describe(e){const t={name:_e.Presto},n=Ne.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){const t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe(e){const t={name:_e.Gecko},n=Ne.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:_e.Blink})},{test:[/(apple)?webkit/i],describe(e){const t={name:_e.WebKit},n=Ne.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];class qe{constructor(e,t=!1){if(null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=Ne.find(Ue,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=Ne.find(ze,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:t}=this.getOS();return e?String(t).toLowerCase()||"":t||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:t}=this.getPlatform();return e?String(t).toLowerCase()||"":t||""}parsePlatform(){this.parsedResult.platform={};const e=Ne.find(We,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=Ne.find(Ve,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return Ne.assign({},this.parsedResult)}satisfies(e){const t={};let n=0;const r={};let o=0;if(Object.keys(e).forEach((i=>{const a=e[i];"string"==typeof a?(r[i]=a,o+=1):"object"==typeof a&&(t[i]=a,n+=1)})),n>0){const e=Object.keys(t),n=Ne.find(e,(e=>this.isOS(e)));if(n){const e=this.satisfies(t[n]);if(void 0!==e)return e}const r=Ne.find(e,(e=>this.isPlatform(e)));if(r){const e=this.satisfies(t[r]);if(void 0!==e)return e}}if(o>0){const e=Object.keys(r),t=Ne.find(e,(e=>this.isBrowser(e,!0)));if(void 0!==t)return this.compareVersion(r[t])}}isBrowser(e,t=!1){const n=this.getBrowserName().toLowerCase();let r=e.toLowerCase();const o=Ne.getBrowserTypeByAlias(r);return t&&o&&(r=o.toLowerCase()),r===n}compareVersion(e){let t=[0],n=e,r=!1;const o=this.getBrowserVersion();if("string"==typeof o)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(Ne.compareVersions(o,n,r))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,t=!1){return this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some((e=>this.is(e)))}}
/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */const He=class{static getParser(e,t=!1){if("string"!=typeof e)throw new Error("UserAgent should be a string");return new qe(e,t)}static parse(e){return new qe(e).getResult()}static get BROWSER_MAP(){return je}static get ENGINE_MAP(){return _e}static get OS_MAP(){return Pe}static get PLATFORMS_MAP(){return Le}}.getParser(window.navigator.userAgent),Ge="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,Qe=He.getOSName(!0);function Ke(){return!("tablet"!==He.getPlatformType(!0)&&!Ye())}function Ye(){return!!He.satisfies({macos:{safari:">=13"}})&&Ge}function Ze(){return He}function Je(){return"mobile"===He.getPlatformType(!0)}function Xe(){return"macos"===Qe}function et(){return"ios"===Qe}const tt=Xe()||et()?"⌘":"CTRL",nt=`Press [${tt}+C] to copy content from remote clipboard.`,rt=`Press [${tt}+V] to paste content to remote clipboard.`,ot=te.getLogger("UI Clipboard");let it="",at="",st=!1;function ct(e){let{connection:n,copyEnabled:o,pasteEnabled:i,currentWindow:a}=e;const[s,c]=t.useState(!1),[l,d]=t.useState(""),[u,f]=t.useState({}),[w,E]=t.useState({}),S=()=>{c(!1),n.captureClipboardEvents(!1,a)},x=(e,t)=>{s?(f({status:e,message:t}),a.document.getElementById("modal-popover-trigger").click()):(E({status:e,message:t}),a.document.getElementById("icon-popover-trigger").click())},O=()=>{st||(x("success","Clipboard synced"),("string"==typeof it||it instanceof String)&&d(it))},C=()=>{st||(x("success","Clipboard synced"),("string"==typeof at||at instanceof String)&&d(at))},M=()=>{x("error","The clipboard data is too large to be transferred"),st=!0},k=e=>{switch(ot.info(`[UI][Clipboard] Received clipboard event ${e.name}`),e.name){case"established":break;case"copy":case"autoCopyDone":O();break;case"paste":case"autoPasteDone":C();break;case"dataSizeAlert":M();break;case"remoteError":"dataSizeAlert"===e.error&&M();break;case"newDataAvailable":e.autoCopy||x("info","Use the clipboard to copy data locally or remotely."),it=e.clipboardData["text/plain"],st=!1;break;case"pasteAvailableData":at=e.clipboardData,st=!1;break;default:ot.info("[UI][Clipboard] Unknown clipboard event.")}};return r((()=>(Y.on("clipboard",k),()=>{Y.off("clipboard",k)})),[a,s]),t.createElement("div",null,t.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"start"}},t.createElement("div",{style:{height:0}},t.createElement(y,{dismissButton:!1,position:"bottom",size:"large",triggerType:"custom",content:t.createElement(v,{type:w.status},w.message)},t.createElement("div",{id:"icon-popover-trigger"}))),t.createElement("div",{title:"Clipboard"},t.createElement(h,{iconName:"copy",variant:"icon",onClick:()=>{c(!0),d(""),n.captureClipboardEvents(!0,a)}}))),t.createElement(g,{onDismiss:S,visible:s,size:"large",header:"Copy and paste",footer:t.createElement(m,{float:"right"},t.createElement(h,{variant:"primary",onClick:S},"Done")),modalRoot:a.document.body},t.createElement(p,{size:"xl"},t.createElement(m,null,o&&t.createElement(m,{variant:"p"},nt),i&&t.createElement(m,{variant:"p"},rt)),t.createElement(m,{variant:"p",margin:{bottom:"xs"}},"Content preview")),t.createElement("div",{style:{margin:"auto",width:"1px",height:0}},t.createElement(y,{dismissButton:!1,position:"top",size:"large",triggerType:"custom",content:t.createElement(v,{type:u.status},u.message)},t.createElement("div",{id:"modal-popover-trigger",style:{marginTop:"19.5px"}}))),t.createElement(b,{controlId:"textarea",value:(I=l,I.substring(0,5e3).replace(/\0/g,"").concat(I.length>5e3?" ...":"")),readOnly:!0,rows:10})));var I}ct.propTypes={connection:u.object,copyEnabled:u.bool,pasteEnabled:u.bool,currentWindow:u.object};var lt=n(ct),dt="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,ut=function(e){try{return!!e()}catch(e){return!0}},mt=!ut((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),pt=function(e){return e&&e.Math==Math&&e},ft=pt("object"==typeof globalThis&&globalThis)||pt("object"==typeof window&&window)||pt("object"==typeof self&&self)||pt("object"==typeof G&&G)||function(){return this}()||Function("return this")(),ht=function(e){return"function"==typeof e},gt=ht,bt=function(e){return"object"==typeof e?null!==e:gt(e)},yt=!ut((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),vt=yt,wt=Function.prototype,Et=wt.bind,St=wt.call,xt=vt&&Et.bind(St,St),Ot=vt?function(e){return e&&xt(e)}:function(e){return e&&function(){return St.apply(e,arguments)}},Ct=ft.TypeError,Mt=function(e){if(null==e)throw Ct("Can't call method on "+e);return e},kt=Mt,It=ft.Object,Ft=function(e){return It(kt(e))},Rt=Ft,Tt=Ot({}.hasOwnProperty),At=Object.hasOwn||function(e,t){return Tt(Rt(e),t)},Bt={exports:{}},Dt=ft,jt=Object.defineProperty,Lt=function(e,t){try{jt(Dt,e,{value:t,configurable:!0,writable:!0})}catch(n){Dt[e]=t}return t},Pt=Lt,_t=ft["__core-js_shared__"]||Pt("__core-js_shared__",{}),Nt=_t;(Bt.exports=function(e,t){return Nt[e]||(Nt[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.20.3",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var $t,Ut,zt=Ot,Wt=0,Vt=Math.random(),qt=zt(1..toString),Ht=function(e){return"Symbol("+(void 0===e?"":e)+")_"+qt(++Wt+Vt,36)},Gt=ft,Qt=ht,Kt=function(e){return Qt(e)?e:void 0},Yt=function(e,t){return arguments.length<2?Kt(Gt[e]):Gt[e]&&Gt[e][t]},Zt=ft,Jt=Yt("navigator","userAgent")||"",Xt=Zt.process,en=Zt.Deno,tn=Xt&&Xt.versions||en&&en.version,nn=tn&&tn.v8;nn&&(Ut=($t=nn.split("."))[0]>0&&$t[0]<4?1:+($t[0]+$t[1])),!Ut&&Jt&&(!($t=Jt.match(/Edge\/(\d+)/))||$t[1]>=74)&&($t=Jt.match(/Chrome\/(\d+)/))&&(Ut=+$t[1]);var rn=Ut,on=ut,an=!!Object.getOwnPropertySymbols&&!on((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&rn&&rn<41})),sn=an&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,cn=ft,ln=Bt.exports,dn=At,un=Ht,mn=an,pn=sn,fn=ln("wks"),hn=cn.Symbol,gn=hn&&hn.for,bn=pn?hn:hn&&hn.withoutSetter||un,yn=function(e){if(!dn(fn,e)||!mn&&"string"!=typeof fn[e]){var t="Symbol."+e;mn&&dn(hn,e)?fn[e]=hn[e]:fn[e]=pn&&gn?gn(t):bn(t)}return fn[e]},vn={};vn[yn("toStringTag")]="z";var wn="[object z]"===String(vn),En=Ot,Sn=En({}.toString),xn=En("".slice),On=function(e){return xn(Sn(e),8,-1)},Cn=ft,Mn=wn,kn=ht,In=On,Fn=yn("toStringTag"),Rn=Cn.Object,Tn="Arguments"==In(function(){return arguments}()),An=Mn?In:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Rn(e),Fn))?n:Tn?In(t):"Object"==(r=In(t))&&kn(t.callee)?"Arguments":r},Bn=ft.String,Dn=function(e){try{return Bn(e)}catch(e){return"Object"}},jn={},Ln=bt,Pn=ft.document,_n=Ln(Pn)&&Ln(Pn.createElement),Nn=function(e){return _n?Pn.createElement(e):{}},$n=Nn,Un=!mt&&!ut((function(){return 7!=Object.defineProperty($n("div"),"a",{get:function(){return 7}}).a})),zn=mt&&ut((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Wn=ft,Vn=bt,qn=Wn.String,Hn=Wn.TypeError,Gn=function(e){if(Vn(e))return e;throw Hn(qn(e)+" is not an object")},Qn=yt,Kn=Function.prototype.call,Yn=Qn?Kn.bind(Kn):function(){return Kn.apply(Kn,arguments)},Zn=Ot({}.isPrototypeOf),Jn=Yt,Xn=ht,er=Zn,tr=sn,nr=ft.Object,rr=tr?function(e){return"symbol"==typeof e}:function(e){var t=Jn("Symbol");return Xn(t)&&er(t.prototype,nr(e))},or=ht,ir=Dn,ar=ft.TypeError,sr=function(e){if(or(e))return e;throw ar(ir(e)+" is not a function")},cr=sr,lr=Yn,dr=ht,ur=bt,mr=ft.TypeError,pr=Yn,fr=bt,hr=rr,gr=function(e,t){var n=e[t];return null==n?void 0:cr(n)},br=function(e,t){var n,r;if("string"===t&&dr(n=e.toString)&&!ur(r=lr(n,e)))return r;if(dr(n=e.valueOf)&&!ur(r=lr(n,e)))return r;if("string"!==t&&dr(n=e.toString)&&!ur(r=lr(n,e)))return r;throw mr("Can't convert object to primitive value")},yr=yn,vr=ft.TypeError,wr=yr("toPrimitive"),Er=function(e,t){if(!fr(e)||hr(e))return e;var n,r=gr(e,wr);if(r){if(void 0===t&&(t="default"),n=pr(r,e,t),!fr(n)||hr(n))return n;throw vr("Can't convert object to primitive value")}return void 0===t&&(t="number"),br(e,t)},Sr=rr,xr=function(e){var t=Er(e,"string");return Sr(t)?t:t+""},Or=mt,Cr=Un,Mr=zn,kr=Gn,Ir=xr,Fr=ft.TypeError,Rr=Object.defineProperty,Tr=Object.getOwnPropertyDescriptor;jn.f=Or?Mr?function(e,t,n){if(kr(e),t=Ir(t),kr(n),"function"==typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n.writable){var r=Tr(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:"configurable"in n?n.configurable:r.configurable,enumerable:"enumerable"in n?n.enumerable:r.enumerable,writable:!1})}return Rr(e,t,n)}:Rr:function(e,t,n){if(kr(e),t=Ir(t),kr(n),Cr)try{return Rr(e,t,n)}catch(e){}if("get"in n||"set"in n)throw Fr("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var Ar=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Br=jn,Dr=Ar,jr=mt?function(e,t,n){return Br.f(e,t,Dr(1,n))}:function(e,t,n){return e[t]=n,e},Lr={exports:{}},Pr=ht,_r=_t,Nr=Ot(Function.toString);Pr(_r.inspectSource)||(_r.inspectSource=function(e){return Nr(e)});var $r,Ur,zr,Wr=_r.inspectSource,Vr=ht,qr=Wr,Hr=ft.WeakMap,Gr=Vr(Hr)&&/native code/.test(qr(Hr)),Qr=Bt.exports,Kr=Ht,Yr=Qr("keys"),Zr=function(e){return Yr[e]||(Yr[e]=Kr(e))},Jr={},Xr=Gr,eo=ft,to=Ot,no=bt,ro=jr,oo=At,io=_t,ao=Zr,so=Jr,co=eo.TypeError,lo=eo.WeakMap;if(Xr||io.state){var uo=io.state||(io.state=new lo),mo=to(uo.get),po=to(uo.has),fo=to(uo.set);$r=function(e,t){if(po(uo,e))throw new co("Object already initialized");return t.facade=e,fo(uo,e,t),t},Ur=function(e){return mo(uo,e)||{}},zr=function(e){return po(uo,e)}}else{var ho=ao("state");so[ho]=!0,$r=function(e,t){if(oo(e,ho))throw new co("Object already initialized");return t.facade=e,ro(e,ho,t),t},Ur=function(e){return oo(e,ho)?e[ho]:{}},zr=function(e){return oo(e,ho)}}var go={set:$r,get:Ur,has:zr,enforce:function(e){return zr(e)?Ur(e):$r(e,{})},getterFor:function(e){return function(t){var n;if(!no(t)||(n=Ur(t)).type!==e)throw co("Incompatible receiver, "+e+" required");return n}}},bo=mt,yo=At,vo=Function.prototype,wo=bo&&Object.getOwnPropertyDescriptor,Eo=yo(vo,"name"),So=Eo&&"something"===function(){}.name,xo=Eo&&(!bo||bo&&wo(vo,"name").configurable),Oo=ft,Co=ht,Mo=At,ko=jr,Io=Lt,Fo=Wr,Ro={EXISTS:Eo,PROPER:So,CONFIGURABLE:xo}.CONFIGURABLE,To=go.get,Ao=go.enforce,Bo=String(String).split("String");(Lr.exports=function(e,t,n,r){var o,i=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet,c=r&&void 0!==r.name?r.name:t;Co(n)&&("Symbol("===String(c).slice(0,7)&&(c="["+String(c).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Mo(n,"name")||Ro&&n.name!==c)&&ko(n,"name",c),(o=Ao(n)).source||(o.source=Bo.join("string"==typeof c?c:""))),e!==Oo?(i?!s&&e[t]&&(a=!0):delete e[t],a?e[t]=n:ko(e,t,n)):a?e[t]=n:Io(t,n)})(Function.prototype,"toString",(function(){return Co(this)&&To(this).source||Fo(this)}));var Do,jo,Lo,Po=!ut((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),_o=ft,No=At,$o=ht,Uo=Ft,zo=Po,Wo=Zr("IE_PROTO"),Vo=_o.Object,qo=Vo.prototype,Ho=zo?Vo.getPrototypeOf:function(e){var t=Uo(e);if(No(t,Wo))return t[Wo];var n=t.constructor;return $o(n)&&t instanceof n?n.prototype:t instanceof Vo?qo:null},Go=ft,Qo=ht,Ko=Go.String,Yo=Go.TypeError,Zo=Ot,Jo=Gn,Xo=function(e){if("object"==typeof e||Qo(e))return e;throw Yo("Can't set "+Ko(e)+" as a prototype")},ei=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Zo(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Jo(n),Xo(r),t?e(n,r):n.__proto__=r,n}}():void 0),ti=dt,ni=mt,ri=ft,oi=ht,ii=bt,ai=At,si=An,ci=Dn,li=jr,di=Lr.exports,ui=jn.f,mi=Zn,pi=Ho,fi=ei,hi=yn,gi=Ht,bi=ri.Int8Array,yi=bi&&bi.prototype,vi=ri.Uint8ClampedArray,wi=vi&&vi.prototype,Ei=bi&&pi(bi),Si=yi&&pi(yi),xi=Object.prototype,Oi=ri.TypeError,Ci=hi("toStringTag"),Mi=gi("TYPED_ARRAY_TAG"),ki=gi("TYPED_ARRAY_CONSTRUCTOR"),Ii=ti&&!!fi&&"Opera"!==si(ri.opera),Fi=!1,Ri={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Ti={BigInt64Array:8,BigUint64Array:8},Ai=function(e){if(!ii(e))return!1;var t=si(e);return ai(Ri,t)||ai(Ti,t)};for(Do in Ri)(Lo=(jo=ri[Do])&&jo.prototype)?li(Lo,ki,jo):Ii=!1;for(Do in Ti)(Lo=(jo=ri[Do])&&jo.prototype)&&li(Lo,ki,jo);if((!Ii||!oi(Ei)||Ei===Function.prototype)&&(Ei=function(){throw Oi("Incorrect invocation")},Ii))for(Do in Ri)ri[Do]&&fi(ri[Do],Ei);if((!Ii||!Si||Si===xi)&&(Si=Ei.prototype,Ii))for(Do in Ri)ri[Do]&&fi(ri[Do].prototype,Si);if(Ii&&pi(wi)!==Si&&fi(wi,Si),ni&&!ai(Si,Ci))for(Do in Fi=!0,ui(Si,Ci,{get:function(){return ii(this)?this[Mi]:void 0}}),Ri)ri[Do]&&li(ri[Do],Mi,Do);var Bi={NATIVE_ARRAY_BUFFER_VIEWS:Ii,TYPED_ARRAY_CONSTRUCTOR:ki,TYPED_ARRAY_TAG:Fi&&Mi,aTypedArray:function(e){if(Ai(e))return e;throw Oi("Target is not a typed array")},aTypedArrayConstructor:function(e){if(oi(e)&&(!fi||mi(Ei,e)))return e;throw Oi(ci(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,r){if(ni){if(n)for(var o in Ri){var i=ri[o];if(i&&ai(i.prototype,e))try{delete i.prototype[e]}catch(n){try{i.prototype[e]=t}catch(e){}}}Si[e]&&!n||di(Si,e,n?t:Ii&&yi[e]||t,r)}},exportTypedArrayStaticMethod:function(e,t,n){var r,o;if(ni){if(fi){if(n)for(r in Ri)if((o=ri[r])&&ai(o,e))try{delete o[e]}catch(e){}if(Ei[e]&&!n)return;try{return di(Ei,e,n?t:Ii&&Ei[e]||t)}catch(e){}}for(r in Ri)!(o=ri[r])||o[e]&&!n||di(o,e,t)}},isView:function(e){if(!ii(e))return!1;var t=si(e);return"DataView"===t||ai(Ri,t)||ai(Ti,t)},isTypedArray:Ai,TypedArray:Ei,TypedArrayPrototype:Si},Di=Math.ceil,ji=Math.floor,Li=function(e){var t=+e;return t!=t||0===t?0:(t>0?ji:Di)(t)},Pi=Li,_i=Math.min,Ni=function(e){return e>0?_i(Pi(e),9007199254740991):0},$i=function(e){return Ni(e.length)},Ui=$i,zi=Li,Wi=Bi.aTypedArray;(0,Bi.exportTypedArrayMethod)("at",(function(e){var t=Wi(this),n=Ui(t),r=zi(e),o=r>=0?r:n+r;return o<0||o>=n?void 0:t[o]}));var Vi=sr,qi=yt,Hi=Ot(Ot.bind),Gi=Ot,Qi=ut,Ki=On,Yi=ft.Object,Zi=Gi("".split),Ji=Qi((function(){return!Yi("z").propertyIsEnumerable(0)}))?function(e){return"String"==Ki(e)?Zi(e,""):Yi(e)}:Yi,Xi=function(e,t){return Vi(e),void 0===t?e:qi?Hi(e,t):function(){return e.apply(t,arguments)}},ea=Ji,ta=Ft,na=$i,ra=function(e){var t=1==e;return function(n,r,o){for(var i,a=ta(n),s=ea(a),c=Xi(r,o),l=na(s);l-- >0;)if(c(i=s[l],l,a))switch(e){case 0:return i;case 1:return l}return t?-1:void 0}},oa={findLast:ra(0),findLastIndex:ra(1)},ia=oa.findLast,aa=Bi.aTypedArray;(0,Bi.exportTypedArrayMethod)("findLast",(function(e){return ia(aa(this),e,arguments.length>1?arguments[1]:void 0)}));var sa=oa.findLastIndex,ca=Bi.aTypedArray;(0,Bi.exportTypedArrayMethod)("findLastIndex",(function(e){return sa(ca(this),e,arguments.length>1?arguments[1]:void 0)}));const la=`OS: ${Ye()?`iOS ${Ze().getBrowserVersion()}(Desktop Mode on iOS Safari detected, estimating version from Safari)`:`${Ze().getOSName()} ${Ze().getOSVersion()}`}\nBrowser version: ${Ze().getBrowserName()} ${Ze().getBrowserVersion()} with ${Ze().getEngineName()} engine\nPlatform: ${Ye()?" Tablet (Desktop Mode on iOS Safari detected)":Ze().getPlatformType()}\nWeb SDK version: ${e.version.versionStr}`;let da=te.getLogger("about");function ua(e){const[n,o]=t.useState(""),[i,a]=t.useState("");return r((()=>{null!==e.connection&&(o(ma(e.connection.getServerInfo())),fetch("third-party-licenses.txt").then((e=>{let t=`Status code: ${e.status}, Status Text: ${e.statusText}`;if(da.debug(`Received response. ${t}`),[...e.headers.entries()].forEach((e=>da.debug(`Header: ${e[0]} with value: ${e[1]}`))),!e.ok)throw new Error(t);return e.text()})).then((e=>a(e))).catch((e=>da.warn(`Failed to fetch resource. Error: ${e}`))))}),[e.connection]),t.createElement(g,{onDismiss:e.onDismiss,visible:e.visible,size:"large",header:"About NICE DCV",modalRoot:window.document.body,disableContentPaddings:!0,footer:t.createElement(x,{gridDefinition:[{colspan:7},{colspan:5}]},t.createElement(m,null,"Copyright © 2017-2023, NICE s.r.l. All rights reserved."),t.createElement(m,{float:"right"},t.createElement(S,{external:!0,externalIconAriaLabel:"Opens in a new tab",href:"EULA.txt"},"End User License Agreement")))},t.createElement(E,{tabs:[{label:"Client",id:"about-client",content:ae(t.createElement(b,{rows:10,readOnly:!0,value:la}))},{label:"Server",id:"about-server",content:ae(t.createElement(b,{rows:10,readOnly:!0,value:n}))},{label:"Third party notices",id:"third-party-notices",content:ae(t.createElement(b,{rows:10,readOnly:!0,value:i}))}]}))}function ma(e,t){let n="";return Object.keys(e).forEach((r=>{"version"===r?n+=`${ie(r)}: ${e[r].major}.${e[r].minor}.${e[r].revision}\n`:oe(e[r])?n+=ma(e[r],ie(r)):n+=t?`${t}-${r}: ${e[r]}\n`:`${ie(r)}: ${e[r]}\n`})),n}function pa(){return pa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pa.apply(this,arguments)}ua.propTypes={connection:u.object,visible:u.bool,onDismiss:u.func};var fa=({styles:e={},...n})=>t.createElement("svg",pa({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M15 6h-5V1M1 6h5V1M1 10h5v5M15 10h-5v5M1 1l5 5M15 1l-5 5M6 10l-5 5M10 10l5 5"}));const ha=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"];function ga(e){return Boolean(e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement)}function ba(e){let{setFullscreen:n,currentDocument:o}=e;const[i,a]=t.useState(!1),s=()=>{const e=ga(o);a(e),n(e)},c=()=>o.fullscreenEnabled||o.webkitFullscreenEnabled||o.mozFullScreenEnabled||o.msFullscreenEnabled;return r((()=>(c()&&ha.forEach((e=>o.addEventListener(e,s))),()=>{c()&&ha.forEach((e=>o.removeEventListener(e,s)))})),[o,n]),t.createElement("div",{title:"Full Screen"},t.createElement(h,k({},i?{iconSvg:t.createElement(fa,null)}:{iconName:"expand"},{variant:"icon",onClick:()=>{ga(o)?(o.exitFullscreen?o.exitFullscreen():o.mozCancelFullScreen?o.mozCancelFullScreen():o.webkitExitFullscreen?o.webkitExitFullscreen():o.msExitFullscreen&&o.msExitFullscreen(),navigator?.keyboard?.unlock()):(()=>{const e=o.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen&&e.msRequestFullscreen(),navigator?.keyboard?.lock()})()}})))}ba.propTypes={setFullscreen:u.func,currentDocument:u.object};var ya=n(ba);let va,wa,Ea,Sa=te.getLogger("UI Display Layout"),xa={},Oa={};function Ca(){return wa}function Ma(e){return Ce.dynamicResolution&&Ca()&&Ce.selectedResolution===be&&(e||va&&va.length>1)}function ka(e,t,n){let r,o;if(va&&va.length>0)1===va.length||n?(r=va[0].rect.width,o=va[0].rect.height):va.length>1&&!n&&(r=va[1].rect.width,o=va[1].rect.height);else{let e=t.document.getElementById("dcv-display");e?(r=e.getBoundingClientRect().width,o=e.getBoundingClientRect().height):(r=t.innerWidth,o=t.innerHeight)}Ma(n)?(xa[n]&&(clearTimeout(xa[n]),xa[n]=null),xa[n]=setTimeout((()=>{!function(e,t,n){let r=Ta(t),o=Ra(t);r=Math.min(r,Ce.maxDisplayWidth||r),r=Math.max(r,Ce.minDisplayWidth||r),o=Math.min(o,Ce.maxDisplayHeight||o),o=Math.max(o,Ce.minDisplayHeight||o);(()=>{const e=e=>Math.abs(Oa[n].width-r)>e||Math.abs(Oa[n].height-o)>e;return!ga(t.document)&&!t.fullScreen||function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(Oa[n])||e(2)})()?(Oa[n]={width:r,height:o},La(e,r,o,n)):Aa(t.document.getElementById("dcv-display-frame"),"hidden")}(e,t,n),xa[n]=null}),500)):Da(r,o,t,n)}function Ia(e,t){return`${e}x${t}`}function Fa(e){return e.split("x")}function Ra(e){let t=0,n=e.document.getElementById("dcv-container"),r=e.document.getElementById("dcv-display-frame");return n&&r?(t=r.getBoundingClientRect().top-n.getBoundingClientRect().top,n.getBoundingClientRect().height-t):se(e)}function Ta(e){let t=e.document.getElementById("dcv-container");return t?t.getBoundingClientRect().width:e.innerWidth}function Aa(e,t){e&&(e.style.overflow=t)}function Ba(e){let t=e.document.getElementById("dcv-display"),n=e.document.getElementById("dcv-display-frame");t&&n&&((()=>{let r=Ra(e),o=t.getBoundingClientRect().height,i=o?`${Math.max(0,(r-o)/2).toString()}px`:0;t.style.marginTop=i,n.style.height=`${r.toString()}px`})(),(()=>{let r=Ta(e),o=t.getBoundingClientRect().width,i=o?`${Math.max(0,(r-o)/2).toString()}px`:0;t.style.marginLeft=i,n.style.width=`${r.toString()}px`})())}function Da(e,t,n,r){let o=1,i=1,a=1;const s=Ta(n),c=Ra(n);if(Ba(n),Aa(n.document.getElementById("dcv-display-frame"),Ce.scaleToFit?"hidden":"auto"),Ma(r)||(Oa[r]={}),Ce.scaleToFit){if(i=s/e,a=c/t,o=Math.max(0,Math.floor(100*Math.min(1,i,a))/100),!o)return;Sa.info(`[UI] Requesting a display scaling factor of ${o}`),!function(e,t){let n=`scale(${e})`,r=t.getElementById("dcv-display"),o=t.getElementById("dcv-container");Ea||(Ea=function(){let e=window.CSS&&window.CSS.supports||window.supportsCSS;if(e&&e("( transform: scale(1) )"))return"transform";if(e&&e("( zoom: 0.8 )"))return"zoom";return"no-scale"}());if("transform"===Ea)return r.style.transform=n,r.style.transformOrigin="0 0",o.style.overflow="hidden",!0;if("zoom"===Ea)return r.style.zoom=e,o.style.overflow="hidden",!0;return o.style.overflow="auto",!1}(o,n.document)?Sa.info("[UI] CSS scaling or zoom unsupported!"):Ba(n)}}function ja(e){va=e}function La(e,t,n,r){let o,i,a=r?va[0].name:va[1].name,s=r?0:va[0].rect.width;return va&&va.length>1?(o={name:a,rect:{x:s,y:0,width:t,height:n},primary:r},i=r?[o,va[1]]:[va[0],o],ja(i),e.requestDisplayLayout(i)):e.requestResolution(t,n)}function Pa(e){const[n,o]=t.useState(Ce.macOptionToAlt),[i,a]=t.useState(Ce.macCommandToControl),s=t=>{t?(Ce.macOptionToAlt=n,Ce.macCommandToControl=i,Me(),e.connection.setKeyboardQuirks({macOptionToAlt:n,macCommandToControl:i,forceKeyboardCombinations:Ce.forceKeyboardCombinations})):(o(Ce.macOptionToAlt),a(Ce.macCommandToControl))};return r((()=>(Y.on("close-preferences",s),()=>{Y.off("close-preferences",s)})),[n,i]),t.createElement(p,{size:"xxl"},t.createElement(m,null,t.createElement(m,{margin:{bottom:"s"}},"Option key setting"),t.createElement(M,{onChange:e=>{let{detail:t}=e;return o(t.value)},value:n,items:[{value:!0,label:"Use Option (⌥) as remote Alt key"},{value:!1,label:"Use Option (⌥) as local modifier"}]})),t.createElement(m,null,t.createElement(m,{margin:{bottom:"s"}},"Command key setting"),t.createElement(M,{onChange:e=>{let{detail:t}=e;return a(t.value)},value:i,items:[{value:!0,label:"Use Command (⌘) as remote Control key"},{value:!1,label:"Use Command (⌘) as remote Meta key"}]})))}Pa.propTypes={connection:u.object};const _a={ERROR:{status:"error",color:"red",importance:3},WARNING:{status:"warning",color:"red",importance:2},SUCCESS:{status:"success",color:"green",importance:1},INFO:{status:"info",color:"blue",importance:1}};let Na=0,$a=[];function Ua(e,t){let n,r=(e=>({id:Na++,level:re(e.level)?_a.INFO:e.level,header:re(e.header)?"":e.header,description:re(e.description)?null:e.description,progress:re(e.progress)?null:e.progress,uploadedBytes:re(e.progress)?null:e.uploadedBytes,totalBytes:re(e.progress)?null:e.totalBytes,uploadedFiles:re(e.progress)?null:e.uploadedFiles,totalFiles:re(e.progress)?null:e.totalFiles,actions:re(e.actions)?{}:e.actions,timestamp:Date.now()}))(e),o=-1;return re(t)||(o=$a.findIndex((e=>e.id===t))),-1===o?n=[r].concat($a.map((e=>({...e})))):(n=$a.map((e=>({...e}))),n[o]=r),$a=n,Y.emit("notifications-update",$a),r.id}function za(e){let t=$a.map((e=>({...e}))).filter((t=>t.id!==e));$a=t,Y.emit("notifications-update",$a)}function Wa(e,t,n,r,o,i){if(!re(t)){let a=$a.findIndex((e=>e.id===t));if(-1!==a){let t=$a.map((e=>({...e})));t[a].progress=e,t[a].uploadedBytes=n,t[a].totalBytes=r,t[a].uploadedFiles=o,t[a].totalFiles=i,$a=t,Y.emit("notifications-update",$a)}}}let Va=te.getLogger("UI CameraSelect"),qa=null;function Ha(e){const[n,i]=t.useState(),[a,s]=t.useState([]),[c,l]=t.useState(),d=o(!0),u=e=>{Ua({level:_a.ERROR,header:"Error getting devices.",description:e.message,actions:{dismissable:!0}},null)},f=e=>{let t=[];e.filter((e=>"videoinput"===e.kind)).forEach(((e,n)=>{t.push({label:e.label||`Camera ${n+1}`,value:e.deviceId})})),s(t)},g=()=>{e.connection.getConnectedDevices().then(f).catch(u)},b=()=>{navigator.permissions.query({name:"camera"}).then((t=>{qa&&(qa.onchange=null),qa=t,n||(t.onchange=b,g()),i(t.state),"granted"===t.state&&ce(e.webcamStatus)&&g()})).catch((e=>{e instanceof TypeError?Va.info(e.message):Va.warn(e.message)}))},y=t=>{t?c&&(e.setWebcamId(c),Ce.selectedWebcamId=c,Me()):l(Ce.selectedWebcamId)},v=()=>t.createElement(h,{iconAlign:"right",href:"https://docs.aws.amazon.com/dcv/latest/userguide/using-webcam.html",target:"_blank",iconName:"external"},"Read more");r((()=>{a.filter((t=>e.webcamId===t.value)).length?l(e.webcamId):a.length&&(l(a[0].value),e.setWebcamId(a[0].value))}),[e.webcamId,n,a]),r((()=>{e.webcamStatus&&(Va.info(`Webcam enabled. Status: ${e.webcamStatus}`),d.current&&(b(),d.current=!1))}),[e.webcamStatus]),r((()=>(Y.on("close-preferences",y),Y.on("device-change",g),()=>{Y.off("close-preferences",y),Y.off("device-change",g)})),[e.connection,e.setWebcamId,c]);const[w,E,S,x]=(()=>{let r="",o=null,i="info",a=!0;if("busy"===e.webcamStatus)r="Camera not available. Another user is already sharing a camera within the session.",o=v(),i="warning";else switch(n){case"prompt":r="Camera not available. Grant camera permission to use it.",o=t.createElement(h,{onClick:()=>navigator.mediaDevices.getUserMedia({video:!0})},"Allow detection"),i="info";break;case"denied":r="Camera not available. Grant camera permission to use it.",o=v(),i="warning";break;case"granted":"streaming"===e.webcamStatus?(r="The selected camera cannot be changed while the streaming is active.",o=v(),i="warning"):(r="Camera available. Check the browser settings to change this site's camera permission.",o=v(),i="info",a=!1)}return[r,o,i,a]})();return t.createElement(p,{size:"l"},t.createElement(F,{action:E,type:S},w),t.createElement("div",null,t.createElement(m,null,"Camera"),t.createElement(m,{color:"text-body-secondary",fontSize:"body-s",margin:{bottom:"s"}},"Select which camera to activate."),t.createElement("div",{style:{width:"70%"}},t.createElement(I,{selectedOption:(e=>{let t=a.filter((t=>e===t.value));return t.length?t[0]:null})(c),onChange:e=>{let{detail:t}=e;return l(t.selectedOption.value)},options:a,selectedAriaLabel:"Selected",disabled:x}))))}Ha.propTypes={connection:u.object,webcamStatus:u.string,webcamId:u.string,setWebcamId:u.func};let Ga=te.getLogger("UI Preferences");function Qa(n){const[o,i]=t.useState("general"),[a,s]=t.useState(Ce.selectedResolution),[c,l]=t.useState(Ce.metricsEnabled),[d,u]=t.useState(!1),[f,b]=t.useState(!1),[y,v]=t.useState(Ce.displayQuality),[w,S]=t.useState(Ce.appearanceMode),[x,k]=t.useState(Ce.toolbarBehavior),[I,F]=t.useState(260),[R,T]=t.useState(0),[A,B]=t.useState(Ce.timezoneRedirectionEnabled),D=e=>{Ua({level:_a.WARNING,header:"Timezone Redirection config error.",description:t.createElement("div",null,"Failed to ",A?"enable":"disable",".",t.createElement("br",null),"Error: ",e.message," (code: ",e.code,")"),actions:{dismissable:!0}})},j=()=>{Y.emit("close-preferences",!1),s(Ce.selectedResolution),v(Ce.displayQuality),S(Ce.appearanceMode),k(Ce.toolbarBehavior),l(Ce.metricsEnabled),b(Ce.highColorAccuracy),B(Ce.timezoneRedirectionEnabled),n.onDismiss()};return r((()=>{n.connection&&Be("high-color-accuracy",(e=>{u(e.available),b(e.enabled),F(e.available?350:260),e.available&&(Ce.highColorAccuracy=e.enabled,Me())}))}),[n.connection]),r((()=>{T(n.timezoneRedirectionSetting),n.connection&&n.timezoneRedirectionSetting===e.TimezoneRedirectionSetting.CLIENT_DECIDES&&n.connection.enableTimezoneRedirection(A).catch(D)}),[n.connection,n.timezoneRedirectionSetting]),t.createElement(g,{onDismiss:j,visible:n.visible,size:"large",header:"Preferences",modalRoot:window.document.body,disableContentPaddings:!0,footer:t.createElement(m,{float:"right"},t.createElement(p,{direction:"horizontal",size:"xs"},t.createElement(h,{variant:"link",onClick:j},"Cancel"),t.createElement(h,{variant:"primary",onClick:()=>{Y.emit("close-preferences",!0),(()=>{let e;y!==Ce.displayQuality&&(e=y===he.label?he:ge,n.connection.setDisplayQuality(e.minQuality,e.maxQuality),Ga.info(`Switching to ${y} display mode`),Ce.displayQuality=y)})(),w!==Ce.appearanceMode&&(Ce.appearanceMode=w,n.submitAppearanceModePreferences(w)),x!==Ce.toolbarBehavior&&(Ce.toolbarBehavior=x,n.submitToolbarBehaviorPreferences(x)),c!==Ce.metricsEnabled&&(Ce.metricsEnabled=c,n.submitMetricsPreferences(c)),(()=>{if(!d)return;let e=f?"enable":"disable";n.connection.requestDisplayConfig(f).catch((n=>{Ua({level:_a.WARNING,header:"Display config error.",description:t.createElement("div",null,"Failed to ",e," high color accuracy.",t.createElement("br",null),"Error: ",n.message," (code: ",n.code,")"),actions:{dismissable:!0}})}))})(),a!==Ce.selectedResolution&&(Ce.selectedResolution=a===be?be:ye,n.submitResolutionPreferences(a),s(Ce.selectedResolution)),A!==Ce.timezoneRedirectionEnabled&&(Ce.timezoneRedirectionEnabled=A,R===e.TimezoneRedirectionSetting.CLIENT_DECIDES&&n.connection.enableTimezoneRedirection(A).catch(D)),Me(),n.onDismiss()}},"Save")))},t.createElement("div",{style:{height:I}},t.createElement(E,{activeTabId:o,onChange:e=>{let{detail:t}=e;return i(t.activeTabId)},tabs:[{label:"General",id:"general",content:ae(t.createElement(C,{columns:2},t.createElement("div",null,t.createElement(p,{size:"xxl"},t.createElement(m,null,t.createElement(m,{margin:{bottom:"s"}},"Appearance"),t.createElement(M,{onChange:e=>{let{detail:t}=e;return S(t.value)},value:w,items:[...Ee()?[{value:"System default",label:"System default"+(n.systemDefaultAppearanceMode?` (${ie(n.systemDefaultAppearanceMode)})`:"")}]:[],{value:"Light mode",label:"Light mode"},{value:"Dark mode",label:"Dark mode"}]})),R===e.TimezoneRedirectionSetting.CLIENT_DECIDES?t.createElement(m,null,t.createElement(m,{margin:{bottom:"s"}},"Time Zone Redirection"),t.createElement(O,{onChange:e=>{let{detail:t}=e;return B(t.checked)},checked:A},A?"Enabled":"Disabled")):null)),t.createElement("div",null,t.createElement(m,{margin:{bottom:"s"}},"Toolbar behavior"),t.createElement(M,{onChange:e=>{let{detail:t}=e;return k(t.value)},value:x,items:[{value:le,label:le,description:de},{value:ue,label:ue,description:me},{value:pe,label:pe,description:fe}]}))))},{label:"Display",id:"display",content:ae(t.createElement(C,{columns:2},t.createElement(p,{size:"xxl"},t.createElement(m,null,t.createElement(m,{margin:{bottom:"s"}},"Streaming mode"),t.createElement(M,{onChange:e=>{let{detail:t}=e;return v(t.value)},value:y,items:[{value:he.label,label:he.label,description:he.description},{value:ge.label,label:ge.label,description:ge.description}]})),d&&t.createElement(m,null,t.createElement(m,{margin:{bottom:"s"}},"High color accuracy (YUV 4:4:4)"),t.createElement(O,{onChange:e=>{let{detail:t}=e;return b(t.checked)},checked:f,description:"Streaming performance could be affected."},f?"Enabled":"Disabled")),t.createElement(m,null,t.createElement(m,{margin:{bottom:"s"}},"Streaming metrics in the toolbar"),t.createElement(O,{onChange:e=>{let{detail:t}=e;return l(t.checked)},checked:c},c?"Enabled":"Disabled"))),Ca()?t.createElement(m,null,t.createElement(m,{margin:{bottom:"s"}},"Display resolution"),t.createElement(M,{onChange:e=>{let{detail:t}=e;return s(t.value)},value:a,items:[{value:be,label:"Adapt automatically"},{value:ye,label:`${n.currentResolution} (Current)`},...(L=n.currentResolution,ve.filter((e=>{let t=!0;if(Ce.minDisplayWidth&&(t=e.width>=Ce.minDisplayWidth),t&&Ce.maxDisplayWidth&&(t=e.width<=Ce.maxDisplayWidth),t&&Ce.minDisplayHeight&&(t=e.height>=Ce.minDisplayHeight),t&&Ce.maxDisplayWidth&&(t=e.height<=Ce.maxDisplayHeight),t){let n=Fa(L);e.width.toString()===n[0]&&e.height.toString()===n[1]&&(t=!1)}return t})).map((e=>({value:Ia(e.width,e.height),label:Ia(e.width,e.height)}))))]})):null))},...Xe()?[{label:"Keyboard",id:"keyboard",content:ae(t.createElement(Pa,{connection:n.connection}))}]:[],...n.webcamStatus&&"not-available"!==n.webcamStatus?[{label:"Camera",id:"camera",content:ae(t.createElement(Ha,{connection:n.connection,webcamStatus:n.webcamStatus,webcamId:n.webcamId,setWebcamId:n.setWebcamId}))}]:[]]})));var L}Qa.propTypes={connection:u.object,visible:u.bool,onDismiss:u.func,submitResolutionPreferences:u.func,currentResolution:u.string,submitMetricsPreferences:u.func,submitAppearanceModePreferences:u.func,submitToolbarBehaviorPreferences:u.func,webcamStatus:u.string,webcamId:u.string,setWebcamId:u.func,systemDefaultAppearanceMode:u.oneOf([c.Light,c.Dark]),timezoneRedirectionSetting:u.number};const Ka=te.getLogger("UI Dropdown");let Ya;function Za(e){let{connection:n,relativeMouseModeEnabled:o,sasEnabled:i,screenshotEnabled:a,currentResolution:s,submitResolutionPreferences:c,submitMetricsPreferences:l,submitAppearanceModePreferences:d,submitToolbarBehaviorPreferences:u,webcamStatus:m,webcamId:p,setWebcamId:f,systemDefaultAppearanceMode:h,timezoneRedirectionSetting:g}=e;const[b,y]=t.useState(""),[v,E]=t.useState(!1),[S,x]=t.useState(!1),[O,C]=t.useState(0),M=e=>{switch(e){case"relativeMouseMode":n.enterRelativeMouseMode();break;case"SAS":!function(e){e.sendKeyboardShortcut([{key:"Control",location:KeyboardEvent.DOM_KEY_LOCATION_LEFT},{key:"Alt",location:KeyboardEvent.DOM_KEY_LOCATION_LEFT},{key:"Delete",location:KeyboardEvent.DOM_KEY_LOCATION_STANDARD}])}(n);break;case"preferences":x(!0);break;case"screenshot":!function(e){let n=e=>{Ka.error(`Failed to capture screenshot: ${e.message}`),Ua({level:_a.ERROR,header:"Screenshot error",description:t.createElement("div",null,"Failed to capture screenshot.",t.createElement("br",null),"Error: ",e.message),actions:{dismissable:!0}})};Ya=setTimeout((()=>{Ka.warn("No response to the screenshot request"),n({message:"Timeout"}),Ya=null}),2e4),e.getScreenshot().catch((e=>{Ya&&clearTimeout(Ya),n(e)}))}(n);break;case"aboutDCV":E(!0);break;case"disconnection":n.disconnect()}};return r((()=>{null!==n&&y(n.getServerInfo().hostname)}),[n]),r((()=>(Y.on("screenshot",Xa),()=>{Y.off("screenshot",Xa)})),[]),r((()=>{C(g)}),[g]),t.createElement("div",{title:"More"},t.createElement(w,{onItemClick:e=>{let{detail:t}=e;return M(t.id)},items:[...o?[{text:"Use relative mouse [Ctrl + Shift + F8]",id:"relativeMouseMode"}]:[],...i?[{text:"Send Ctrl + Alt + Del",id:"SAS"}]:[],...a?[{text:"Save Screenshot",id:"screenshot"}]:[],{text:"Preferences",id:"preferences"},{text:"About NICE DCV",id:"aboutDCV"},{text:"Disconnect",id:"disconnection"}]},b),t.createElement(ua,{connection:n,visible:v,onDismiss:()=>{E(!1)}}),t.createElement(Qa,{connection:n,currentResolution:s,submitResolutionPreferences:c,visible:S,onDismiss:()=>{x(!1)},submitMetricsPreferences:l,submitAppearanceModePreferences:d,submitToolbarBehaviorPreferences:u,webcamStatus:m,webcamId:p,setWebcamId:f,systemDefaultAppearanceMode:h,timezoneRedirectionSetting:O}))}function Ja(e){return btoa(function(e){let t,n=32768,r=[];for(t=0;t<e.length;t+=n)r.push(String.fromCharCode.apply(null,e.subarray(t,t+n)));return r.join("")}(new Uint8Array(e)))}function Xa(e){Ya&&clearTimeout(Ya),null!==e?(Ka.info("[UI] Retrieved screenshot"),Ua({level:_a.INFO,header:"Screenshot captured.",description:"Screenshot ready to be downloaded.",actions:{accept:{text:"Download",callback:()=>function(e){const t=document.createElement("a");t.href=`data: image/png;base64,${Ja(e)}`,"download"in t&&(t.download="connection.png"),t.target="_blank",t.click()}(e),remove:!0},decline:{text:"Decline",remove:!0}}})):(Ka.warn("Failed to capture screenshot"),Ua({level:_a.ERROR,header:"Screenshot error.",description:"Failed to capture screenshot.",actions:{dismissable:!0}}))}Za.propTypes={connection:u.object,relativeMouseModeEnabled:u.bool,sasEnabled:u.bool,screenshotEnabled:u.bool,currentResolution:u.string,submitResolutionPreferences:u.func,submitMetricsPreferences:u.func,submitAppearanceModePreferences:u.func,submitToolbarBehaviorPreferences:u.func,webcamStatus:u.string,webcamId:u.string,setWebcamId:u.func,systemDefaultAppearanceMode:u.oneOf([c.Light,c.Dark]),timezoneRedirectionSetting:u.number};var es=n(Za);function ts(){return ts=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ts.apply(this,arguments)}var ns=({styles:e={},...n})=>t.createElement("svg",ts({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("rect",{x:"4",y:"1",width:"4",height:"8",rx:"2"}),t.createElement("path",{d:"M1 6v1a5 5 0 008 4M6 12v3M1 15h10M15.12 5.75l-4.5 4.5M15.12 10.25l-4.5-4.5"}));const rs=te.getLogger("UI Microphone");function os(e){let{connection:n,status:r}=e;const[o,i]=t.useState(!1);return t.createElement("div",{title:"Microphone"},t.createElement(h,k({},"active"===r?{iconName:"microphone"}:{iconSvg:t.createElement(ns,null)},{variant:"icon",onClick:()=>{if(o)return;const e=!Ce.microphone;Ce.microphone=e,rs.debug("[Audio][UI] Setting microphone to "+(e?"enabled":"disabled")),i(e),n.setMicrophone(e).catch((t=>{const n=`Failed to ${e?"enable":"disable"} microphone.`;rs.warn(`${n} Disabling microphone. Error (code: ${t.code}): ${t.message}`),Ce.microphone=!1,Ua({level:_a.ERROR,header:"Microphone error.",description:n,actions:{dismissable:!0}})})).finally((()=>{i(!1)}))}})))}os.propTypes={connection:u.object,status:u.string};var is=n(os);function as(){return as=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},as.apply(this,arguments)}var ss=({styles:e={},...n})=>t.createElement("svg",as({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M7 15V1L1 6v4l6 5zM15.01 5.75l-4.5 4.5M15.01 10.25l-4.5-4.5"}));function cs(){return cs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cs.apply(this,arguments)}var ls=({styles:e={},...n})=>t.createElement("svg",cs({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M7 15V1L1 6v4l6 5zM11 5v6"}));function ds(){return ds=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ds.apply(this,arguments)}var us=({styles:e={},...n})=>t.createElement("svg",ds({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M7 15V1L1 6v4l6 5zM15 3v10M11 5v6"}));const ms=te.getLogger("UI Audio");function ps(e){let{connection:n}=e;const[r,o]=t.useState(Ce.volume),[i,a]=t.useState(Ce.volume),s=e=>{o(e),Ce.volume=e,Me(),n.setVolume(e),ms.debug(`[UI] Client volume level set to ${e}`)};return t.createElement(y,{position:"bottom",size:"large",triggerType:"custom",header:"Volume",dismissButton:!1,content:t.createElement(p,{direction:"horizontal",size:"s"},t.createElement(h,{iconSvg:fs(r),variant:"icon",onClick:()=>{s(r?0:i)}}),t.createElement("input",{type:"range",style:{verticalAlign:"middle",width:"150px",height:"100%"},orient:"horizontal",min:"0",max:"100",step:"1",value:i,onChange:e=>{return t=Number(e.target.value),a(t),void s(t);var t}}),t.createElement("div",{style:{display:"flex",width:"3ch",textAlign:"center",alignItems:"center",justifyContent:"center",height:"100%"}},t.createElement("output",null,i)))},t.createElement("div",{title:"Audio"},t.createElement(h,{iconSvg:fs(r),variant:"icon"})))}function fs(e){return e<=0?t.createElement(ss,null):e<=50?t.createElement(ls,null):t.createElement(us,null)}ps.propTypes={connection:u.object};var hs=n(ps);function gs(e){return e<1e3?`${e.toFixed(1)} bps`:e<1e6?`${(e/1e3).toFixed(1)} kbps"`:`${(e/1e6).toFixed(1)} Mbps`}const bs=e=>{let{label:n,color:r,children:o}=e;return t.createElement("div",null,t.createElement(m,{margin:{bottom:"xxxs"}},t.createElement(p,{direction:"horizontal",size:"xxs"},r&&t.createElement(ys,{color:r}),t.createElement(m,{color:"text-label"},n))),t.createElement("div",null,o))};bs.propTypes={label:u.string,color:u.string,children:u.node};const ys=e=>{let{color:n}=e;return t.createElement("svg",{width:"12",height:"12"},t.createElement("rect",{width:"12",height:"12",style:{fill:n,strokeWidth:"1",stroke:"rgb(0,0,0)"}}))};ys.propTypes={color:u.string};let vs=null,ws=[];function Es(e){let{connection:n}=e;const[a,s]=t.useState(0),[c,l]=t.useState(0),[d,u]=t.useState(0),[f,b]=t.useState(""),[y,v]=t.useState(""),[w,E]=t.useState([]),[O,C]=t.useState(!1),M=o();M.current=O;const k=()=>{const e=n.getStats();let t,r,o=0;if(ws.length>60){for(t=[],r=0;r<ws.length-1;r++)t.push(ws[r]);ws=t}for(0===ws.length?ws.push({x:0,y:e.traffic}):(ws.forEach((e=>{e.x++})),ws.unshift({x:0,y:e.traffic})),r=0;r<ws.length;r++)o+=ws[r].y;o/=ws.length,M.current&&(E(ws),s(e.traffic),l(o),u(e.peakTraffic)),b(e.latency>999?"> 1 s":`${Math.round(e.latency)} ms`),v(`${e.fps} fps`),vs=setTimeout(k,1e3)},I=i((()=>{C(!0)}),[]);r((()=>(null!==n&&k(),()=>{clearTimeout(vs)})),[n]);const F=()=>t.createElement("div",{title:"Metrics"},t.createElement(h,{variant:"link",onClick:I},t.createElement(p,{direction:"horizontal",size:"m"},t.createElement(m,{fontWeight:"bold",color:"inherit"},y),t.createElement(m,{fontWeight:"bold",color:"inherit"},f))));return t.createElement("div",null,t.createElement(F,null),O&&t.createElement(g,{onDismiss:()=>{C(!1)},visible:O,size:"medium",header:"Streaming metrics",footer:t.createElement(x,{gridDefinition:[{colspan:4},{colspan:4},{colspan:4}]},t.createElement(bs,{label:"Current usage",color:A},gs(a)),t.createElement(bs,{label:"Average usage",color:B},gs(c)),t.createElement(bs,{label:"Peak usage",color:D},gs(d)))},t.createElement(p,{size:"xl"},t.createElement(x,{gridDefinition:[{colspan:6},{colspan:6}]},t.createElement(bs,{label:"Framerate"},y),t.createElement(bs,{label:"Network latency"},f)),t.createElement(T,{variant:"h3",actions:t.createElement(S,{external:!0,externalIconAriaLabel:"Opens in a new tab",href:"https://docs.aws.amazon.com/dcv/latest/userguide/using-streaming.html#using-streaming-metrics"},"Learn more")},"Download bandwidth"),t.createElement(R,{series:[{title:"Current usage",type:"line",data:w,color:A,valueFormatter:gs},{title:"Average usage",type:"threshold",y:c,color:B,valueFormatter:gs},...w.some((e=>e.y>=.8*d))?[{title:"Peak usage",type:"threshold",y:d,color:D,valueFormatter:gs}]:[]],i18nStrings:{xTickFormatter:e=>`${e} s`,yTickFormatter:gs},xDomain:[60,0],hideFilter:!0,hideLegend:!0,ariaLabel:"Single data series line chart",height:200,empty:t.createElement(m,{textAlign:"center",color:"inherit"},t.createElement("b",null,"No data available"),t.createElement(m,{variant:"p",color:"inherit"},"There is no data available"))}))))}Es.propTypes={connection:u.object};var Ss=n(Es);function xs(){return xs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xs.apply(this,arguments)}var Os=({styles:e={},...n})=>t.createElement("svg",xs({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M8 12v3M3 15h10"}),t.createElement("circle",{cx:"8",cy:"6.56",r:"5.38"}),t.createElement("path",{d:"M10.25 4.25l-4.5 4.5M10.25 8.75l-4.5-4.5"}));function Cs(){return Cs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cs.apply(this,arguments)}var Ms=({styles:e={},...n})=>t.createElement("svg",Cs({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M8 12v3M3 15h10"}),t.createElement("circle",{cx:"8",cy:"6.56",r:"5.38"}),t.createElement("path",{d:"M5 6.5h6"}));function ks(){return ks=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ks.apply(this,arguments)}var Is=({styles:e={},...n})=>t.createElement("svg",ks({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M8 12v3M3 15h10"}),t.createElement("circle",{cx:"8",cy:"6.56",r:"5.38"}),t.createElement("circle",{cx:"8",cy:"6.5",r:"2"}));const Fs=te.getLogger("UI Webcam");function Rs(e){let{connection:n,status:i,selectedWebcam:a,setSelectedWebcam:s}=e;const c=o(!1),l=o(!1),d=()=>{const e=!Ce.webcam;l.current?Fs.debug(`[Webcam][UI] Cannot set camera to ${e?"enabled":"disabled"} as a request is already in progress`):(l.current=!0,Fs.debug("[Webcam][UI] Setting camera to "+(e?"enabled":"disabled")),n.setWebcam(e,a).then((t=>{e&&s(t)})).catch((t=>{const n=`Failed to ${e?"enable":"disable"} camera.`;Fs.warn(`${n} Disabling camera. Error (code: ${t.code}): ${t.message}`),Ua({level:_a.ERROR,header:"Camera error.",description:n,actions:{dismissable:!0}})})).finally((()=>{l.current=!1})))};return r((()=>{"attached"===i&&(d(),c.current=!0)}),[a]),r((()=>{"available"===i&&c.current&&(d(),c.current=!1)}),[i]),t.createElement("div",{title:"Camera"},t.createElement(h,{iconSvg:Ts(i),variant:"icon",onClick:d}))}function Ts(e){switch(e){case"available":return t.createElement(Os,null);case"attached":return t.createElement(Ms,null);case"streaming":return t.createElement(Is,null);default:throw new Error(`Illegal camera serviceStatus: ${e}`)}}Rs.propTypes={connection:u.object,status:u.string,selectedWebcam:u.string,setSelectedWebcam:u.func};var As=n(Rs);function Bs(){return Bs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bs.apply(this,arguments)}var Ds=({styles:e={},...n})=>t.createElement("svg",Bs({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M14 6.5l-3-3-3 3M11 4v10M8 9.5l-3 3-3-3M5 2v10"}));const js=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}),Ls={text:"Storage",href:null},Ps=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],_s=te.getLogger("UI Filestorage");let Ns,$s=!1;function Us(e){let{connection:n,downloadEnabled:a,uploadEnabled:s}=e;const[c,l]=t.useState(!1),d=o(!1),[u,f]=t.useState(!0),[b,y]=t.useState(!1),[v,E]=t.useState([]),[x,O]=t.useState([Ls]),[C,M]=t.useState(1),[k,I]=t.useState(Ls.href),F=o(Ls.href),[R,T]=t.useState([]),[A,B]=t.useState(""),[D,j]=t.useState(""),[L,P]=t.useState(!1),[_,N]=t.useState(!1),[$,H]=t.useState(!1),G=o(null),Q=o(null),K=o(null),Z=()=>Math.max(5,Math.floor((window.innerHeight-320-86)/42)),J=()=>R.slice((C-1)*Z(),C*Z()),X=(e,n)=>t.createElement("div",{style:{display:"flex",alignItems:"center",height:"100%"}},t.createElement(U,{name:e}),n&&t.createElement("span",{style:{marginLeft:"5px"}},n)),ee=e=>{let n,r=e&&"/"!==e&&"Storage"!==e?e:"",o=[];_s.debug(`[File Storage UI] Changing to directory ${r}`),n=Ns.list(r),n.on("error",(e=>{1===e.code||2===e.code?_s.info(`[File Storage UI] Aborted listing of ${r} folder`):(_s.warn(`[File Storage UI] Failed to list ${r} folder (${e.message})`),Ua({level:_a.ERROR,header:"File storage error.",description:t.createElement("div",null,"Failed to list files in ",r," folder.",t.createElement("br",null),"Error: ",e.message," (code: ",e.code,")"),actions:{dismissable:!0}}),ee())})).on("success",(()=>{_s.debug("[File Storage UI] List files succeeded"),T(o),e!==k&&E([]),(e=>{let t=e.split("/"),n=[Ls],r="";t.filter((e=>""!==e)).forEach((e=>{r+=`/${e}`,n.push({text:e,path:r,href:null})})),O(n),I(e),F.current=e,M(1)})(r)})).on("newItems",(e=>{_s.debug(`[File Storage UI] New items ${e.length}`),_s.debug(`[File Storage UI] update list folders ${k}`),o.push(...e)})).run()},te=()=>{$s?ee(k):ee()},ne=()=>{l(!0),n.getFileExplorer().then((e=>{Ns=e,te(),n.setUploadBandwidth(51200)})).catch((()=>{f(!1)}))},re=()=>{d.current=!1,l(!1),n.setUploadBandwidth(1024),$s=!1,H(!1)},oe=(e,n)=>{let r,o,i=n||""===n?n:k;o=Ua({level:_a.INFO,header:"Upload in progress.",description:`File ${e.name} is uploading to Storage ${k}`,progress:0,actions:{decline:{text:"Stop uploading",callback:()=>r.cancel(),remove:!0}}}),r=Ns.storeFile(e,i),r.on("error",(n=>{1!==n.code&&Ua({level:_a.ERROR,header:"Upload error.",description:t.createElement("div",null,"Failed to upload ",e.name," to Storage",i,".",t.createElement("br",null),"Error: ",n.message," (code: ",n.code,")"),actions:{dismissable:!0}},o)})).on("progress",((e,t)=>{Wa(Math.floor(100*e/t),o)})).on("success",(()=>{Ua({level:_a.SUCCESS,header:"File uploaded.",description:`File ${e.name} successfully uploaded to Storage${k}`,actions:{dismissable:!0}},o),$s=!0,te()})).run()},ie=e=>{let t=e.target.files;t&&t.length>0?(_s.debug("[File Storage UI] A file to upload has been selected."),oe(t[0])):_s.debug("[File Storage UI] No file to upload has been selected.")},ae=e=>{Ns.retrieveFile(e).on("error",(n=>{Ua({level:_a.ERROR,header:"Download error.",description:t.createElement("div",null,"Impossible to download file ",e,".",t.createElement("br",null),"Error: ",n.message," (code: ",n.code,")"),actions:{dismissable:!0}})})).on("success",(()=>{Ua({level:_a.SUCCESS,header:"File ready for download.",description:`File ${e} ready to be downloaded to your device.`,actions:{dismissable:!0}})})).run()},se=()=>{A.length>0&&A!==D&&((()=>{let e,n="folder"===v[0].type,r=v[0].displayName,o=`${k}/${r}`,i=`${k}/${A}`;e=n?Ns.renameDirectory(o,i):Ns.renameFile(o,i),e.on("error",(e=>{Ua({level:_a.ERROR,header:"Rename error.",description:t.createElement("div",null,"Failed to rename ",(n?"folder ":"file ")+r," to ",A,".",t.createElement("br",null),"Error: ",e.message," (code: ",e.code,")"),actions:{dismissable:!0}})})).on("success",(()=>{_s.debug("[File Storage UI] Rename succeeded."),Ua({level:_a.SUCCESS,header:(n?"Folder":"File")+" renamed.",description:`${n?"Folder":"File"} successfully renamed from ${r} to ${A}.`,actions:{dismissable:!0}}),$s=!0,te()})).run()})(),E([])),N(!1),B("")},ce=()=>{let e=R.map((e=>({...e})));e.shift(),T(e)},le=()=>{var e;A.length>0?Ns.createDirectory(e||`${k}/${A}`).on("error",(e=>{ce(),Ua({level:_a.ERROR,header:"Folder creation error.",description:t.createElement("div",null,"Failed to create folder ",A,".",t.createElement("br",null),"Error: ",e.message," (code: ",e.code,")"),actions:{dismissable:!0}})})).on("success",(()=>{_s.debug("[File Storage UI] Mkdir succeeded"),Ua({level:_a.SUCCESS,header:"Folder created.",description:`Folder ${A} successfully created.`,actions:{dismissable:!0}}),$s=!0,te()})).run():ce(),P(!1),B("")},de=e=>{$s=!0,c||(d.current=!0,ne())},ue=i((e=>{e.stopPropagation(),!e.relatedTarget&&d.current&&c&&re()})),me=e=>{switch(e){case"download":ae(`${k}/${v[0].displayName}`);break;case"open":ee(`${k}/${v[0].displayName}`);break;case"rename":j(v[0].displayName),B(v[0].displayName),N(!0);break;case"delete":Ns.deleteFile(`${k}/${v[0].displayName}`).on("error",(e=>{Ua({level:_a.ERROR,header:"Deletion error.",description:t.createElement("div",null,"Failed to delete file ",v[0].displayName,".",t.createElement("br",null),"Error: ",e.message," (code: ",e.code,")"),actions:{dismissable:!0}})})).on("success",(()=>{_s.debug("Remove succeeded"),Ua({level:_a.SUCCESS,header:"File deleted.",description:`File ${v[0].displayName} successfully deleted.`,actions:{dismissable:!0}}),$s=!0,te()})).run();break;default:_s.warn("Invalid dropdown action selected")}},pe=e=>t.createElement(h,{onClick:()=>e.current.click()},t.createElement("input",{style:{display:"none"},type:"file",ref:e,onChange:ie,onClick:e=>{e.target.value=""}}),"Upload file"),fe=t.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},t.createElement(p,{direction:"horizontal",size:"s"},t.createElement(w,{disabled:!v.length,onItemClick:e=>{let{detail:t}=e;return me(t.id)},items:[...a?[{text:"Download",id:"download",disabled:v.length&&"file"!==v[0].type}]:[],{text:"Rename",id:"rename",disabled:v.length&&!J().filter((e=>e.displayName===v[0].displayName)).length}]},"Actions"),s&&pe(G),t.createElement(h,{onClick:()=>{T([{displayName:null,type:"folder"}].concat(R.map((e=>({...e}))))),E([]),P(!0),M(1)}},"Create folder")),t.createElement(q,{currentPageIndex:C,onChange:e=>{let{detail:t}=e;return M(t.currentPageIndex)},pagesCount:Math.ceil(R.length/Z()),ariaLabels:{nextPageLabel:"Next page",previousPageLabel:"Previous page",pageLabel:e=>`Page ${e}`}})),he=[{id:"name",header:"Name",cell:function(e){return X(e.type,(e=>{const n=(e,n)=>t.createElement(z,{ref:K,onChange:e=>{let{detail:t}=e;return B(t.value)},onBlur:e,onKeyUp:t=>{let{detail:n}=t;13===n.keyCode&&e()},value:A,placeholder:n,disableBrowserAutocorrect:!0,inputMode:"text"});return _&&e.displayName===v[0].displayName?n(se,e.displayName):L&&null===e.displayName?n(le,"New folder"):"file"===e.type?a?t.createElement(S,{ariaLabel:"Download",onFollow:()=>ae(`${k}/${e.displayName}`)},e.displayName):e.displayName:t.createElement(S,{ariaLabel:"Open",onFollow:b?()=>{}:()=>{ee(`${k}/${e.displayName}`)}},e.displayName)})(e))},minWidth:380},{id:"lastModified",header:"Last modified",cell:function(e){return t.createElement(m,{variant:"p"},e.displayName&&e.lastModified?js.format(new Date(e.lastModified)):"-")},minWidth:180},{id:"size",header:"Size",cell:function(e){return t.createElement(m,{variant:"p"},"file"===e.type?zs(e.size):"-")},minWidth:140}],ge=e=>{a&&(_s.debug("Asking to download resource"),e.accept())};return r((()=>()=>{$s=!1,Ns=null}),[]),r((()=>{(_||L)&&(K.current.focus(),_&&K.current.select())}),[_,L]),r((()=>(Y.on("file-download",ge),()=>{Y.off("file-download",ge)})),[a]),r((()=>(window.addEventListener("dragenter",de),window.addEventListener("dragleave",ue),()=>{window.removeEventListener("dragenter",de),window.removeEventListener("dragleave",ue)}))),t.createElement("div",null,t.createElement("div",{title:"Filestorage"},t.createElement(h,{variant:"icon",iconSvg:t.createElement(Ds,null),onClick:ne})),t.createElement(g,{onDismiss:re,visible:c,header:"File storage",size:"large",modalRoot:window.document.body},u?t.createElement("div",{onDragEnter:()=>H(!0)},t.createElement(m,{margin:{bottom:"xs"},padding:{bottom:"xs"}},t.createElement(p,{size:"xxs"},t.createElement(p,{direction:"horizontal",size:"s"},X("folder-open",""),t.createElement(W,{items:x,onClick:b?()=>{}:e=>{let{detail:t}=e;return ee(t.item.path)}})),t.createElement("div",{style:{height:42*Z()+86,position:"relative"}},t.createElement(V,{resizableColumns:!0,loadingText:"Loading resources",selectionType:"single",columnDefinitions:he,items:J(),selectedItems:v,onSelectionChange:e=>{let{detail:t}=e;return E(t.selectedItems)},header:fe,empty:t.createElement(m,{textAlign:"center",color:"inherit",variant:"h5",margin:"m"},s?t.createElement(t.Fragment,null,t.createElement("p",null,"Drag and drop a file to upload"),t.createElement("p",null," Or "),pe(Q)):t.createElement("p",null,"Folder ",x[x.length-1].text," is empty"))}),$&&t.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",position:"absolute",alignItems:"center",bottom:"0px",width:"100%",height:42*Z(),opacity:"0.8",outline:"2px",border:"2px dashed gray",backgroundColor:"white"},onDrop:e=>{e.preventDefault(),H(!1),((e,n)=>{if(!e[0])return void _s.debug("[File Storage UI] Dropped file is null");let r=e[0].webkitGetAsEntry()||e[0].getAsEntry();if(r)if(r.isFile&&1===e.length)r.file((e=>{e.name.startsWith(".")||oe(e,n)}),(()=>_s.debug(`[File Storage UI] File not retrieved: ${r.name}`)));else{y(!0);let r=Ns.uploadFiles(e,n),o=Ua({level:_a.INFO,header:"Upload of dropped files in progress.",description:`Dropped files are uploading to Storage${n}`,progress:0,actions:{decline:{text:"Stop uploading",callback:()=>{r.cancel(),y(!1)},remove:!0}}}),i=0;r.on("error",(e=>{1!==e.code&&(Ua({level:_a.ERROR,header:"Upload dropped files error.",description:t.createElement("div",null,"Failed to upload dropped files",t.createElement("br",null),"Error: ",e.message," ",e.code?`(code: ${e.code})`:""),actions:{dismissable:!0}},o),y(!1))})).on("progress",((e,t,n,r,a,s,c)=>{let{destinationFolder:l,isDirectory:d}=c;Wa(Math.floor(e/t*100),o,e,t,n,r),F.current===l&&(d||n>i)&&ee(l),i=n})).on("success",(()=>{Ua({level:_a.SUCCESS,header:"Dropped files uploaded.",description:`Dropped files successfully uploaded to Storage${n}`,actions:{dismissable:!0}},o),y(!1)})).run()}else _s.debug("[File Storage UI] Dropped file is null")})(e.dataTransfer.items,k||"")},onDragOver:e=>e.preventDefault(),onDragLeave:()=>H(!1)},t.createElement(m,{textAlign:"center",color:"inherit",variant:"h5"},"Drag and drop your files to start uploading")))))):t.createElement(m,{textAlign:"center",color:"inherit",variant:"h5"},"File storage is not available")))}function zs(e){if(re(e))return"-";if(0===e)return`0 ${Ps[0]}`;const t=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,t)).toFixed(2))} ${Ps[t]}`}Us.propTypes={connection:u.object,downloadEnabled:u.bool,uploadEnabled:u.bool};var Ws=n(Us);const Vs={MINUTE:60};Vs.HOUR=Vs.MINUTE**2,Vs.DAY=24*Vs.HOUR;const qs=(e,t)=>Math.floor(e/t),Hs={just_now:{limit:10,updateInterval:1,text:e=>"now"},less_than_min:{limit:Vs.MINUTE,updateInterval:1,text:e=>"< 1m ago"},n_min_ago:{limit:Vs.HOUR,updateInterval:30,text:e=>`${qs(e,Vs.MINUTE)}m ago`},n_hours_ago:{limit:Vs.DAY,updateInterval:15*Vs.MINUTE,text:e=>`${qs(e,Vs.HOUR)}h ago`},n_days_ago:{text:e=>`${qs(e,Vs.DAY)}d ago`}};function Gs(){const[e,n]=t.useState([]),o=e=>function(e,t,n){return Number.isFinite(e)&&e>=t&&e<=n}(e,0,100)?t.createElement($,{value:e}):null;return r((()=>{const e=e=>n(Array.isArray(e)?e:[]);return Y.on("notifications-update",e),()=>{Y.off("notifications-update",e)}}),[]),t.createElement(y,{position:"bottom",size:"medium",fixedWidth:!0,triggerType:"custom",dismissButton:!1,content:e.length?t.createElement("div",{style:{maxHeight:Math.floor(.8*window.innerHeight),overflow:"auto"}},t.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"2px 0"}},t.createElement(m,{fontSize:"heading-s",fontWeight:"normal",variant:"h2"},"Notifications"),t.createElement(h,{onClick:()=>{e.forEach((e=>{e.actions&&(e.actions.decline&&("function"==typeof e.actions.decline.callback&&e.actions.decline.callback(),e.actions.decline.remove&&za(e.id)),e.actions.dismissable&&za(e.id))}))}},"Clear all")),Object.values(_a).map((e=>e.importance)).sort(((e,t)=>t-e)).filter(((e,t,n)=>!t||e!==n[t-1])).map((n=>e.filter((e=>e.level.importance===n)).map((e=>t.createElement(m,{margin:{horizontal:"xxxs",vertical:"m"},key:e.id},t.createElement(_,null,t.createElement(m,null,(e=>{const n=t.createElement(v,{type:e.level.status},e.header||ie(e.level.status));return"dismissable"in e.actions?t.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},n,t.createElement("div",{style:{paddingLeft:"10px"}},t.createElement(h,{variant:"icon",iconName:"close",iconAlign:"right",onClick:()=>za(e.id)}))):n})(e)),e.timestamp&&t.createElement(Ks,{timestamp:e.timestamp}),e.description&&t.createElement(m,{margin:{top:"xxs"}},e.description),e.uploadedFiles&&t.createElement(m,{margin:{top:"s"}},`Files uploaded: ${e.uploadedFiles} / ${e.totalFiles} `),e.uploadedBytes&&t.createElement(m,{margin:{top:"s"}},`Bytes uploaded: ${zs(e.uploadedBytes)} / ${zs(e.totalBytes)}`),null!==e.progress&&t.createElement(m,{margin:{top:"s"}},o(e.progress)),("decline"in e.actions||"accept"in e.actions)&&t.createElement(m,{margin:{top:"s"}},(e=>{const n=1===Object.keys(e.actions).filter((e=>-1!==["accept","decline"].indexOf(e))).length?"flex-start":"space-between";return t.createElement("div",{style:{display:"flex",justifyContent:n}},"decline"in e.actions&&t.createElement(h,{onClick:()=>{"function"==typeof e.actions.decline.callback&&e.actions.decline.callback(),e.actions.decline.remove&&za(e.id)}},e.actions.decline.text),"accept"in e.actions&&t.createElement("div",null,t.createElement(h,{variant:"primary",onClick:()=>{"function"==typeof e.actions.accept.callback&&e.actions.accept.callback(),e.actions.accept.remove&&za(e.id)}},e.actions.accept.text)))})(e))))))))):t.createElement(m,{padding:{horizontal:"xxl",vertical:"m"},variant:"p",color:"text-status-inactive",textAlign:"center"},"No notifications to display")},t.createElement("div",{title:"Notifications"},t.createElement(N,{color:(()=>{let t="grey",n=-1;return e.forEach((e=>{e.level.importance>n&&(n=e.level.importance,t=e.level.color)})),t})()},e.length)))}var Qs=n(Gs);function Ks(e){const[n,o]=t.useState((Date.now()-e.timestamp)/1e3),i=e=>Object.values(Hs).find((t=>!("limit"in t)||e<t.limit)),a=e=>{o((Date.now()-e)/1e3)};return r((()=>{const t=i(n).updateInterval;let r=null;return t&&(r=setInterval(a,1e3*t,e.timestamp)),()=>{r&&(clearInterval(r),r=null)}}),[]),t.createElement(m,{variant:"small",textAlign:"right",display:"block",fontWeight:"light"},i(s=n).text(s));var s}Ks.propTypes={timestamp:u.number};var Ys={},Zs={},Js={}.propertyIsEnumerable,Xs=Object.getOwnPropertyDescriptor,ec=Xs&&!Js.call({1:2},1);Zs.f=ec?function(e){var t=Xs(this,e);return!!t&&t.enumerable}:Js;var tc=Ji,nc=Mt,rc=function(e){return tc(nc(e))},oc=mt,ic=Yn,ac=Zs,sc=Ar,cc=rc,lc=xr,dc=At,uc=Un,mc=Object.getOwnPropertyDescriptor;Ys.f=oc?mc:function(e,t){if(e=cc(e),t=lc(t),uc)try{return mc(e,t)}catch(e){}if(dc(e,t))return sc(!ic(ac.f,e,t),e[t])};var pc={},fc=Li,hc=Math.max,gc=Math.min,bc=rc,yc=function(e,t){var n=fc(e);return n<0?hc(n+t,0):gc(n,t)},vc=$i,wc=function(e){return function(t,n,r){var o,i=bc(t),a=vc(i),s=yc(r,a);if(e&&n!=n){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((e||s in i)&&i[s]===n)return e||s||0;return!e&&-1}},Ec={includes:wc(!0),indexOf:wc(!1)},Sc=At,xc=rc,Oc=Ec.indexOf,Cc=Jr,Mc=Ot([].push),kc=function(e,t){var n,r=xc(e),o=0,i=[];for(n in r)!Sc(Cc,n)&&Sc(r,n)&&Mc(i,n);for(;t.length>o;)Sc(r,n=t[o++])&&(~Oc(i,n)||Mc(i,n));return i},Ic=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Fc=kc,Rc=Ic.concat("length","prototype");pc.f=Object.getOwnPropertyNames||function(e){return Fc(e,Rc)};var Tc={};Tc.f=Object.getOwnPropertySymbols;var Ac=Yt,Bc=pc,Dc=Tc,jc=Gn,Lc=Ot([].concat),Pc=Ac("Reflect","ownKeys")||function(e){var t=Bc.f(jc(e)),n=Dc.f;return n?Lc(t,n(e)):t},_c=At,Nc=Pc,$c=Ys,Uc=jn,zc=ut,Wc=ht,Vc=/#|\.prototype\./,qc=function(e,t){var n=Gc[Hc(e)];return n==Kc||n!=Qc&&(Wc(t)?zc(t):!!t)},Hc=qc.normalize=function(e){return String(e).replace(Vc,".").toLowerCase()},Gc=qc.data={},Qc=qc.NATIVE="N",Kc=qc.POLYFILL="P",Yc=qc,Zc=ft,Jc=Ys.f,Xc=jr,el=Lr.exports,tl=Lt,nl=function(e,t,n){for(var r=Nc(t),o=Uc.f,i=$c.f,a=0;a<r.length;a++){var s=r[a];_c(e,s)||n&&_c(n,s)||o(e,s,i(t,s))}},rl=Yc,ol={},il=kc,al=Ic,sl=Object.keys||function(e){return il(e,al)},cl=mt,ll=zn,dl=jn,ul=Gn,ml=rc,pl=sl;ol.f=cl&&!ll?Object.defineProperties:function(e,t){ul(e);for(var n,r=ml(t),o=pl(t),i=o.length,a=0;i>a;)dl.f(e,n=o[a++],r[n]);return e};var fl,hl=Yt("document","documentElement"),gl=Gn,bl=ol,yl=Ic,vl=Jr,wl=hl,El=Nn,Sl=Zr("IE_PROTO"),xl=function(){},Ol=function(e){return"<script>"+e+"<\/script>"},Cl=function(e){e.write(Ol("")),e.close();var t=e.parentWindow.Object;return e=null,t},Ml=function(){try{fl=new ActiveXObject("htmlfile")}catch(e){}var e,t;Ml="undefined"!=typeof document?document.domain&&fl?Cl(fl):((t=El("iframe")).style.display="none",wl.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Ol("document.F=Object")),e.close(),e.F):Cl(fl);for(var n=yl.length;n--;)delete Ml.prototype[yl[n]];return Ml()};vl[Sl]=!0;var kl=Object.create||function(e,t){var n;return null!==e?(xl.prototype=gl(e),n=new xl,xl.prototype=null,n[Sl]=e):n=Ml(),void 0===t?n:bl.f(n,t)},Il=kl,Fl=jn,Rl=yn("unscopables"),Tl=Array.prototype;null==Tl[Rl]&&Fl.f(Tl,Rl,{configurable:!0,value:Il(null)});var Al=Ec.includes,Bl=function(e){Tl[Rl][e]=!0};function Dl(){return Dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dl.apply(this,arguments)}(function(e,t){var n,r,o,i,a,s=e.target,c=e.global,l=e.stat;if(n=c?Zc:l?Zc[s]||tl(s,{}):(Zc[s]||{}).prototype)for(r in t){if(i=t[r],o=e.noTargetGet?(a=Jc(n,r))&&a.value:n[r],!rl(c?r:s+(l?".":"#")+r,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;nl(i,o)}(e.sham||o&&o.sham)&&Xc(i,"sham",!0),el(n,r,i,e)}})({target:"Array",proto:!0},{includes:function(e){return Al(this,e,arguments.length>1?arguments[1]:void 0)}}),Bl("includes");var jl=({styles:e={},...n})=>t.createElement("svg",Dl({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},n),t.createElement("g",{stroke:"#545b64",strokeWidth:"2"},t.createElement("path",{d:"M12 8h0a3 3 0 013 3v3.14a.86.86 0 01-.86.86H9.86a.86.86 0 01-.86-.86V11a3 3 0 013-3z",strokeLinejoin:"round",fill:"none"}),t.createElement("circle",{cx:"12",cy:"3.5",r:"2.5",strokeMiterlimit:"10",fill:"none"}),t.createElement("circle",{cx:"4",cy:"3.5",r:"2.5",fill:"#545b64",strokeMiterlimit:"10"}),t.createElement("path",{d:"M4 8h0a3 3 0 013 3v3.14a.86.86 0 01-.86.86H1.86a.86.86 0 01-.86-.86V11a3 3 0 013-3z",fill:"#545b64",strokeLinejoin:"round"})));function Ll(){return Ll=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ll.apply(this,arguments)}var Pl=({styles:e={},...n})=>t.createElement("svg",Ll({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},n),t.createElement("g",{fill:"none",stroke:"#545b64",strokeWidth:"2"},t.createElement("circle",{cx:"8",cy:"3.5",r:"2.5",strokeMiterlimit:"10"}),t.createElement("path",{d:"M8 8h0a3 3 0 013 3v3.14a.86.86 0 01-.86.86H5.86a.86.86 0 01-.86-.86V11a3 3 0 013-3z",strokeLinejoin:"round"})));let _l=[];const Nl=e=>{if(0!==_l.length){const t=e.map((e=>e.connectionId)),n=_l.map((e=>e.connectionIds)).flat();(e=>{let t,n;e.forEach((e=>{const r=_l.find((t=>t.connectionIds.includes(e)));n=r.owner?"Session owner":"Collaborator",t=`${n} '${r.username}' has disconnected from this session.`,Ua({level:_a.INFO,header:"Client disconnected.",description:t,actions:{dismissable:!0}})}))})(n.filter((e=>!t.some((t=>e===t)))));const r=e.filter((e=>!n.some((t=>e.connectionId===t))));(e=>{let t,n;e.forEach((e=>{n=e.owner?"Session owner":"Collaborator",t=`${n} '${e.username}' has joined this session.`,Ua({level:_a.INFO,header:"New client connected.",description:t,actions:{dismissable:!0}})}))})(r)}};function $l(e){(e=>{Y.emit("collaboration-status-update",e.length>1)})(e),Nl(e),(e=>{_l=[];const t=e.length;for(let r=0;r<t;r++){let t=_l.find((t=>t.username===e[r].username));t?t.connectionIds.push(e[r].connectionId):_l.push({username:(n=e[r]).username,connectionIds:[n.connectionId],owner:n.owner})}var n;_l.sort(((e,t)=>e.username<t.username?-1:1))})(e),Ul()}function Ul(){Y.emit("collaborator-list-update",_l)}function zl(e,t){t.forEach((t=>{t!==e.id&&e.disconnectCollaborator(t)}))}function Wl(e){let{connection:n}=e;const[o,i]=t.useState([]),[a,s]=t.useState(!1);return r((()=>{const e=e=>{s(e.some((e=>e.owner&&e.connectionIds.includes(n.id)))),i(e)};return Y.on("collaborator-list-update",e),Ul(),()=>{Y.off("collaborator-list-update",e)}}),[]),t.createElement(y,{position:"bottom",size:"medium",triggerType:"custom",dismissButton:!1,content:o.length?t.createElement("div",{style:{maxHeight:Math.floor(.8*window.innerHeight),overflow:"auto"}},t.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"2px 0 15px"}},t.createElement(m,{fontSize:"heading-s",fontWeight:"normal",variant:"h2"},"Collaborators"),a&&o.length>2&&t.createElement("div",{style:{marginLeft:"30px"}},t.createElement(h,{onClick:()=>function(e){_l.forEach((t=>zl(e,t.connectionIds)))}(n)},"Disconnect all"))),t.createElement(_,null,o.map((e=>e.username&&(e=>{const r=e.connectionIds.length>1&&e.connectionIds.includes(n.id)||a&&e.connectionIds.includes(n.id)&&e.connectionIds.length>1||a&&!e.connectionIds.includes(n.id);return t.createElement(m,{key:e.username},t.createElement("div",{style:{display:"flex",justifyContent:"space-between",minWidth:"150px"}},t.createElement("div",{style:{display:"flex",alignItems:"center"}},t.createElement(U,{svg:t.createElement(Pl,null),size:"small"}),t.createElement("div",{style:{maxWidth:"200px"}},t.createElement(m,{fontSize:"body-m",fontWeight:"normal",variant:"p",margin:{left:"xs",right:"s"}},`${e.username}${e.connectionIds.length>1?` (${e.connectionIds.length} clients)`:""}`))),r&&t.createElement(h,{variant:"icon",iconName:"close",onClick:()=>zl(n,e.connectionIds)})))})(e))))):t.createElement(m,{padding:{horizontal:"xxl",vertical:"m"},variant:"p",color:"text-status-inactive",textAlign:"center"},"No collaborators to display")},t.createElement("div",{title:"Collaborators"},t.createElement(U,{svg:t.createElement(jl,null)})))}Wl.propTypes={connection:u.object};var Vl=n(Wl);function ql(){return ql=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ql.apply(this,arguments)}var Hl=({styles:e={},...n})=>t.createElement("svg",ql({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M1 2h14v12H1zM4 11h8M4 5h2M7 5h2M10 5h2M4 8h2M7 8h2M10 8h2"}));let Gl;function Ql(e){let{connection:n}=e;const[o,i]=t.useState(!1),a=()=>{i(!0),Gl.focus(),(et()||Ye())&&(Gl.click(),window.scrollTo(0,0),document.body.scrollTop=0,document.scrollingElement.scrollTop=0)},s=()=>{Gl=document.getElementById("dcv-softkbd-hid-input"),Gl&&a()},c=()=>{let e=document.createElement("input");e.setAttribute("id","dcv-softkbd-hid-input"),e.setAttribute("type","text"),e.style.caretColor="transparent",e.style.color="transparent",e.style.background="transparent",e.style.border="none",e.style.fontSize="1pt",e.style.height="1px",e.style.width="1px",e.value="",Gl=e};return r((()=>{var e;return o&&(e=n.sendKeyboardEvent.bind(n),Gl=document.getElementById("dcv-softkbd-hid-input"),Gl&&(Gl.addEventListener("focusout",s),Gl.addEventListener("keydown",e),Gl.addEventListener("keyup",e),Gl.addEventListener("keypress",e))),()=>(e=>{Gl=document.getElementById("dcv-softkbd-hid-input"),Gl&&(Gl.removeEventListener("focusout",s),Gl.removeEventListener("keydown",e),Gl.removeEventListener("keyup",e),Gl.removeEventListener("keypress",e))})(n.sendKeyboardEvent.bind(n))}),[n,o]),r((()=>(c(),()=>{Gl=null,i(!1)})),[]),t.createElement("div",{title:"Virtual keyboard"},t.createElement(h,{iconSvg:t.createElement(Hl,null),variant:"icon",onClick:()=>{o?(Gl=document.getElementById("dcv-softkbd-hid-input"),Gl&&(Gl.blur(),document.getElementById("soft-kbd-div").removeChild(Gl)),i(!1)):(Gl=document.getElementById("dcv-softkbd-hid-input"),Gl||c(),document.getElementById("soft-kbd-div").appendChild(Gl),a())}}))}Ql.propTypes={connection:u.object};var Kl=n(Ql);function Yl(e,t){return Yl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Yl(e,t)}function Zl(e){return Zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zl(e)}function Jl(e,t){if(t&&("object"===Zl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Xl(e){return Xl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Xl(e)}var ed={exports:{}},td={};
/** @license React v16.8.6
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(td,"__esModule",{value:!0});var nd="function"==typeof Symbol&&Symbol.for,rd=nd?Symbol.for("react.element"):60103,od=nd?Symbol.for("react.portal"):60106,id=nd?Symbol.for("react.fragment"):60107,ad=nd?Symbol.for("react.strict_mode"):60108,sd=nd?Symbol.for("react.profiler"):60114,cd=nd?Symbol.for("react.provider"):60109,ld=nd?Symbol.for("react.context"):60110,dd=nd?Symbol.for("react.async_mode"):60111,ud=nd?Symbol.for("react.concurrent_mode"):60111,md=nd?Symbol.for("react.forward_ref"):60112,pd=nd?Symbol.for("react.suspense"):60113,fd=nd?Symbol.for("react.memo"):60115,hd=nd?Symbol.for("react.lazy"):60116;function gd(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case rd:switch(e=e.type){case dd:case ud:case id:case sd:case ad:case pd:return e;default:switch(e=e&&e.$$typeof){case ld:case md:case cd:return e;default:return t}}case hd:case fd:case od:return t}}}function bd(e){return gd(e)===ud}function yd(){}function vd(){}td.typeOf=gd,td.AsyncMode=dd,td.ConcurrentMode=ud,td.ContextConsumer=ld,td.ContextProvider=cd,td.Element=rd,td.ForwardRef=md,td.Fragment=id,td.Lazy=hd,td.Memo=fd,td.Portal=od,td.Profiler=sd,td.StrictMode=ad,td.Suspense=pd,td.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===id||e===ud||e===sd||e===ad||e===pd||"object"==typeof e&&null!==e&&(e.$$typeof===hd||e.$$typeof===fd||e.$$typeof===cd||e.$$typeof===ld||e.$$typeof===md)},td.isAsyncMode=function(e){return bd(e)||gd(e)===dd},td.isConcurrentMode=bd,td.isContextConsumer=function(e){return gd(e)===ld},td.isContextProvider=function(e){return gd(e)===cd},td.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===rd},td.isForwardRef=function(e){return gd(e)===md},td.isFragment=function(e){return gd(e)===id},td.isLazy=function(e){return gd(e)===hd},td.isMemo=function(e){return gd(e)===fd},td.isPortal=function(e){return gd(e)===od},td.isProfiler=function(e){return gd(e)===sd},td.isStrictMode=function(e){return gd(e)===ad},td.isSuspense=function(e){return gd(e)===pd},!function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map((function(e){return t[e]}));if("0123456789"!==r.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach((function(e){o[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}()||Object.assign,Function.call.bind(Object.prototype.hasOwnProperty),vd.resetWarningCache=yd,ed.exports=function(){function e(e,t,n,r,o,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:vd,resetWarningCache:yd};return n.PropTypes=n,n}();var wd=ed.exports;function Ed(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xl(e);if(t){var o=Xl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Jl(this,n)}}var Sd,xd,Od,Cd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yl(e,t)}(o,t.PureComponent);var n,r=Ed(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).container=null,t.window=null,t.windowCheckerInterval=null,t.released=!1,t.state={mounted:!1},t}return(n=[{key:"render",value:function(){return this.state.mounted?H.createPortal(this.props.children,this.container):null}},{key:"componentDidMount",value:function(){this.openChild(),this.setState({mounted:!0})}},{key:"openChild",value:function(){var e,t=this,n=this.props,r=n.url,o=n.title,i=n.name,a=n.features,s=n.onBlock,c=n.onOpen,l=n.center;if("string"!=typeof l||void 0!==a.width&&void 0!==a.height){if("parent"===l)a.left=window.top.outerWidth/2+window.top.screenX-a.width/2,a.top=window.top.outerHeight/2+window.top.screenY-a.height/2;else if("screen"===l){var d=void 0!==window.screenLeft?window.screenLeft:window.screen.left,u=void 0!==window.screenTop?window.screenTop:window.screen.top,m=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,p=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height;a.left=m/2-a.width/2+d,a.top=p/2-a.height/2+u}}else console.warn("width and height window features must be present when a center prop is provided");if(this.window=window.open(r,i,(e=a,Object.keys(e).reduce((function(t,n){var r=e[n];return"boolean"==typeof r?t.push("".concat(n,"=").concat(r?"yes":"no")):t.push("".concat(n,"=").concat(r)),t}),[]).join(","))),this.container=this.window.document.createElement("div"),this.windowCheckerInterval=setInterval((function(){t.window&&!t.window.closed||t.release()}),50),this.window){if(this.window.document.title=o,this.container=this.window.document.getElementById("new-window-container"),null===this.container)this.container=this.window.document.createElement("div"),this.container.setAttribute("id","new-window-container"),this.window.document.body.appendChild(this.container);else{var f=this.window.document.getElementById("new-window-container-static");this.window.document.body.removeChild(f)}this.props.copyStyles&&setTimeout((function(){return e=document,n=t.window.document,r=n.createDocumentFragment(),Array.from(e.styleSheets).forEach((function(e){var t;try{t=e.cssRules}catch(e){console.error(e)}if(t){var o=[];Array.from(e.cssRules).forEach((function(e){var t=e.type;if(t!==CSSRule.UNKNOWN_RULE){var n;n=t===CSSRule.KEYFRAMES_RULE?function(e){var t=["@keyframes",e.name,"{"];return Array.from(e.cssRules).forEach((function(e){t.push(e.keyText,"{",e.style.cssText,"}")})),t.push("}"),t.join(" ")}(e):[CSSRule.IMPORT_RULE,CSSRule.FONT_FACE_RULE].includes(t)?function(e){return e.cssText.split("url(").map((function(e){return"/"===e[1]?"".concat(e.slice(0,1)).concat(window.location.origin).concat(e.slice(1)):e})).join("url(")}(e):e.cssText,o.push(n)}}));var i=n.createElement("style");i.textContent=o.join("\n"),r.appendChild(i)}else if(e.href){var a=n.createElement("link");a.rel="stylesheet",a.href=e.href,r.appendChild(a)}})),void n.head.appendChild(r);var e,n,r}),0),"function"==typeof c&&c(this.window),this.window.addEventListener("beforeunload",(function(){return t.release()}))}else"function"==typeof s?s(null):console.warn("A new window could not be opened. Maybe it was blocked.")}},{key:"componentWillUnmount",value:function(){if(this.window)if(this.props.closeOnUnmount)this.window.close();else if(this.props.children){var e=this.container.cloneNode(!0);e.setAttribute("id","new-window-container-static"),this.window.document.body.appendChild(e)}}},{key:"release",value:function(){if(!this.released){this.released=!0,clearInterval(this.windowCheckerInterval);var e=this.props.onUnload;"function"==typeof e&&e(null)}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(o.prototype,n),o}();function Md(){return Md=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Md.apply(this,arguments)}Od={url:"",name:"",title:"",features:{width:"600px",height:"640px"},onBlock:null,onOpen:null,onUnload:null,center:"parent",copyStyles:!0,closeOnUnmount:!0},(xd="defaultProps")in(Sd=Cd)?Object.defineProperty(Sd,xd,{value:Od,enumerable:!0,configurable:!0,writable:!0}):Sd[xd]=Od,Cd.propTypes={children:wd.node,url:wd.string,name:wd.string,title:wd.string,features:wd.object,onUnload:wd.func,onBlock:wd.func,onOpen:wd.func,center:wd.oneOf(["parent","screen"]),copyStyles:wd.bool,closeOnUnmount:wd.bool};var kd=({styles:e={},...n})=>t.createElement("svg",Md({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M5.5 12v3M.5 15h10M1 5h9v7H1z"}),t.createElement("path",{d:"M5 4V1h9v7h-4"}));const Id=te.getLogger("secondaryscreen");function Fd(e){let{connection:n,copyEnabled:o,pasteEnabled:i,appearanceMode:a,toolbarBehavior:s,pendingDisplays:c}=e;const[l,d]=t.useState(!1),[u,m]=t.useState(null),p=()=>{let e=Gd();d(!1),e&&n&&(Hd(null),n.detachDisplay(e)),u&&!u.closed&&(u.close(),m(null))};return r((()=>(Y.on("close-secondary-display",p),()=>{Y.off("close-secondary-display",p)})),[u,n]),t.createElement(t.Fragment,null,t.createElement("div",{title:"Multiple screens"},t.createElement(h,{iconSvg:t.createElement(kd,null),variant:"icon",onClick:()=>{l?p():d(!0)}})),l&&t.createElement(Cd,{features:{height:window.innerHeight,width:window.innerWidth},name:"DCV Secondary Window",title:`${n.getServerInfo().hostname} - NICE DCV`,onUnload:p,onBlock:p,onOpen:e=>{e.opener=null,m(e),Y.once("open-secondary-display",(()=>(e=>{e?c.length?(Hd(c[0]),n.attachDisplay(e,{displayDivName:"dcv-display",displayId:c[0]}).then((e=>Hd(e))).catch((e=>{Id.error(`Cannot open secondary display (Error: ${e.code} ${e.message})`),p()}))):n.attachDisplay(e,{displayDivName:"dcv-display"}).then((e=>Hd(e))).catch((e=>{Id.error(`Cannot open secondary display (Error: ${e.code} ${e.message})`),p()})):p()})(e)))},closeOnUnmount:!0},t.createElement(Qd,{isPrimary:!1,connection:n,copyEnabled:o,pasteEnabled:i,window:u,appearanceMode:a,toolbarBehavior:s})))}Fd.propTypes={connection:u.object,copyEnabled:u.bool,pasteEnabled:u.bool,appearanceMode:u.oneOf(["System default","Light mode","Dark mode"]),toolbarBehavior:u.oneOf([le,ue,pe]),pendingDisplays:u.arrayOf(u.number)};var Rd=n(Fd);const Td=te.getLogger("viewer"),Ad={position:"relative",margin:"auto",outline:"none"},Bd={height:"100%",overflow:"hidden",position:"relative"},Dd={position:"absolute",width:"100%",zIndex:1e3,pointerEvents:"all"},jd={display:"flex",flexFlow:"row wrap",alignItems:"center","--gap":"32px",marginLeft:"calc(var(--gap) / -2)",marginBottom:"calc(var(--gap) / -2)"},Ld={marginLeft:"calc(var(--gap) / 2)",marginBottom:"calc(var(--gap) / 2)"};let Pd,_d,Nd=[],$d=null,Ud=null;function zd(n){let{isPrimary:o,connection:s,copyEnabled:u,pasteEnabled:h,window:g,appearanceMode:b,toolbarBehavior:y,uiConfig:v}=n;const[w,E]=t.useState(!0),[S,x]=t.useState(!1),[O,C]=t.useState(!1),[M,k]=t.useState(!1),[I,F]=t.useState(""),[R,T]=t.useState(""),[A,B]=t.useState(""),[D,_]=t.useState(""),[N,$]=t.useState(Ce.selectedWebcamId),[U,z]=t.useState(u||!1),[W,V]=t.useState(!1),[q,H]=t.useState(h||!1),[G,Q]=t.useState(Ce.metricsEnabled),[K,Z]=t.useState(!1),[J,X]=t.useState(!1),[ee,ne]=t.useState(!1),[ie,ae]=t.useState(!1),[de,me]=t.useState(!1),[fe,he]=t.useState(!1),[ge,ve]=t.useState(!1),[we,Ee]=t.useState(!1),[Re,Te]=t.useState(null),[Ae,De]=t.useState(Ce.appearanceMode),[je,Le]=t.useState(Ce.toolbarBehavior),[Pe,_e]=t.useState(0),[Ne,$e]=t.useState(""),Ue=i((e=>!v||!oe(v.toolbar)||!(e in v.toolbar)||v.toolbar[e]),[v]),ze=()=>{ka(s,g,o)},We=(e,t,n)=>{(re(n)||0===n)&&(x(t),s.setDisplayQuality(Ce.minQuality,Ce.maxQuality),s.setMaxDisplayResolution(Ce.maxDisplayWidth,Ce.maxDisplayHeight),s.setMinDisplayResolution(Ce.minDisplayWidth,Ce.minDisplayHeight),wa=e,s.setKeyboardQuirks({macOptionToAlt:Ce.macOptionToAlt,macCommandToControl:Ce.macCommandToControl,forceKeyboardCombinations:Ce.forceKeyboardCombinations})),o||Pd?(ve(!0),Ee(!0)):Td.info(`Received first frame for an unknown displayId: ${n}`)},Ve=t=>{_e(t.setting);const n=t.status;n&&Ne!==n&&($e(n),n===e.TimezoneRedirectionStatus.PERMISSION_ERROR?Ua({level:_a.WARNING,header:"Time Zone Redirection.",description:"This user does not have permission to perform this operation.",actions:{dismissable:!0}}):n===e.TimezoneRedirectionStatus.GENERIC_ERROR&&Ua({level:_a.WARNING,header:"Time Zone Redirection.",description:"The setting could not be saved. Please try again.",actions:{dismissable:!0}}))},qe=(e,t,n)=>{let r=o||re(n)||1===n.length?e:n[1].rect.width,i=o||re(n)||1===n.length?t:n[1].rect.height;ja(n),-1!==[be,ye].indexOf(Ce.selectedResolution)?F(Ia(r,i)):F(Ce.selectedResolution),Da(r,i,g,o)},Ge=i((e=>{!function(e,t,n,r){if(t===be)Ce.dynamicResolution=!0,ka(e,n,r);else if(Ce.dynamicResolution=!1,t!==ye){const n=Fa(t);La(e,n[0],n[1],r)}Me()}(s,e,g,o)}),[s,g,o]),Qe=e=>{T(e.remote),Ce.microphone="active"===e.remote,"busy"===e.remote?$d=Ua({level:_a.WARNING,header:"Audio input unavailable.",description:"This browser or session does not support audio input.",actions:{dismissable:!0}},$d):Vd()},Ye=e=>{B(e.remote),e.enabled?null!==Ud&&(za(Ud),Ud=null):(Ud=Ua({level:_a.WARNING,header:"Audio output unavailable.",description:"This browser or session does not support audio output.",actions:{dismissable:!0}},Ud),Vd())},Ze=e=>{_(e.serviceStatus),Ce.webcam=-1!==["attached","streaming"].indexOf(e.serviceStatus)},Xe=e=>{let{message:n,code:r}=e;Ua({level:_a.ERROR,header:"Webcam error.",description:t.createElement("div",null,"Webcam could not be attached.",t.createElement("br",null),"Error: ",n," (code: ",r,")"),actions:{dismissable:!0}})},et=e=>{z(e.enabled)},tt=e=>{H(e.enabled)},nt=e=>{x(e.enabled)},rt=e=>{X(e.enabled)},ot=e=>{ne(e.enabled)},it=e=>{k(e.enabled)},at=e=>{let t=e.currentTarget.getBoundingClientRect();e.clientY===t.top&&(ve(!0),g.document.getElementById("dcv-display").blur())},st=()=>{ve(!1)},ct=i((e=>{he(e),(je===le||je===ue&&e)&&ve(!1)}),[je]),dt=e=>{if(!e.enabled){const e=g.document.getElementById("dcv-softkbd-hid-input");e&&g.document.getElementById("soft-kbd-div").removeChild(e)}ae(e.enabled)},ut=e=>{Te(e.matches?c.Dark:c.Light),"System default"===Ae&&xe(e,g.document.body)},mt=()=>{g.document.getElementById("dcv-container")&&g.document.getElementById("dcv-container").removeEventListener("mousemove",at),g.document.getElementById("dcv-display")&&g.document.getElementById("dcv-display").removeEventListener("focusin",st)},pt=(e,t)=>{let n=Nd.indexOf(e);t.closed?(-1!==n&&Nd.splice(n,1),e===_d&&Y.emit("close-secondary-display")):t.enabled?Pd=e===_d:-1===n&&Nd.push(e)};r((()=>l(d.Compact,g.document.body)),[g]),r((()=>(o&&Y.on("filestorage-enabled",Z),()=>{o&&Y.off("filestorage-enabled",Z)})),[o]),r((()=>(s&&(Y.on("first-frame",We),o?(!function(e){ke=te.getLogger("featurehandler"),Ie=e}(s),Y.on("display-availability",pt),Be("audio-in",Qe),Be("audio-out",Ye),Be("webcam",Ze),Be("webcam-error",Xe),Be("clipboard-copy",et),Be("clipboard-paste",tt),Be("relative-mouse",nt),Be("file-download",rt),Be("file-upload",ot),Be("display-multi",(e=>me(e.enabled&&!Je()&&!Ke()))),Be("keyboard-sas",(e=>C(e.enabled))),He.satisfies({ie:"=11"})||Be("screenshot",it),Be("timezone-redirection",Ve)):Y.emit("open-secondary-display")),()=>{Y.off("first-frame",We),o&&(Y.off("display-availability",pt),Fe={})})),[s,o]),r((()=>{if(!w){const e=()=>ka(s,g,o);if(Pd&&Nd.length){let t=Nd.indexOf(_d);-1!==t&&Nd.splice(t,1),setTimeout(e,500)}else e()}}),[w]),r((()=>(Y.on("collaboration-status-update",V),()=>{Y.off("collaboration-status-update",V)}))),r((()=>(Y.on("display-layout",qe),()=>{Y.off("display-layout",qe)})),[je,s,g,o]),r((()=>{s&&(Je()||Ke())&&Be("keyboard",dt)}),[s,g]),r((()=>{const e=()=>{Y.emit("close-secondary-display"),s&&s.disconnect()};return o&&g.addEventListener("beforeunload",e),()=>{o&&g.removeEventListener("beforeunload",e)}}),[s,g,o]),r((()=>(we&&(g.addEventListener("resize",ze),je!==pe&&(je!==ue||fe)||ge?(je===le||je===ue&&fe)&&ge&&ve(!1):ve(!0),fe&&je===ue||je===le?(g.document.getElementById("dcv-container")&&g.document.getElementById("dcv-container").addEventListener("mousemove",at),g.document.getElementById("dcv-display")&&g.document.getElementById("dcv-display").addEventListener("focusin",st)):mt(),E(!1)),()=>{g.removeEventListener("resize",ze),mt()})),[we,je,fe,s,o,g]),r((()=>{w&&!ge||ka(s,g,o)}),[je,fe]),r((()=>{let e=Se();return Oe(Ae,g.document.body),e&&(Te(e.matches?c.Dark:c.Light),e.addEventListener("change",ut)),()=>{e&&e.removeEventListener("change",ut)}}),[Ae]),r((()=>{b&&De(b)}),[b]),r((()=>{y&&Le(y)}),[y]);const ft=a((()=>t.createElement(p,{direction:"horizontal",size:"m"},o&&K&&t.createElement(Ws,{connection:s,downloadEnabled:J,uploadEnabled:ee}),(U||q)&&t.createElement(lt,{connection:s,copyEnabled:U,pasteEnabled:q,currentWindow:g}),o&&Wd(R)&&Wd(A)&&t.createElement(is,{connection:s,status:R}),o&&Wd(A)&&t.createElement(hs,{connection:s}),o&&ce(D)&&t.createElement(As,{connection:s,status:D,selectedWebcam:N,setSelectedWebcam:$}),o&&de&&Ue("multimonitorButton")&&t.createElement(Rd,{connection:s,copyEnabled:U,pasteEnabled:q,appearanceMode:Ae,toolbarBehavior:je,pendingDisplays:Nd}),Ue("fullscreenButton")&&t.createElement(ya,{setFullscreen:ct,currentDocument:g.document}))),[o,K,s,J,ee,U,q,R,A,D,N,$,de,U,q,Ae,je,Nd,ct,Ue,g]),ht=a((()=>t.createElement(m,{textAlign:"center"},t.createElement(Ss,{connection:s}))),[s]),gt=a((()=>t.createElement(m,{float:"right"},t.createElement("div",{style:jd},o&&ie&&qd(t.createElement(Kl,{connection:s})),o&&W&&qd(t.createElement(Vl,{connection:s})),qd(t.createElement(Qs,null)),qd(t.createElement(es,{connection:s,relativeMouseModeEnabled:S,sasEnabled:O,screenshotEnabled:M,currentResolution:I,submitResolutionPreferences:Ge,submitMetricsPreferences:Q,submitAppearanceModePreferences:De,submitToolbarBehaviorPreferences:Le,webcamStatus:D,webcamId:N,setWebcamId:$,systemDefaultAppearanceMode:Re,timezoneRedirectionSetting:Pe}))))),[o,ie,s,W,S,O,M,I,D,N,Re,Pe]),bt=a((()=>t.createElement(m,{display:ge?"block":"none",padding:{left:"s",right:"s",top:"xs",bottom:"xs"}},t.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},ft,o&&G&&ht,o&&gt))),[ge,ft,o,G,ht,gt]),yt=a((()=>t.createElement("div",{id:"dcv-toolbar-container",style:{backgroundColor:j,borderBottom:`1px solid ${L}`,...je===le||fe&&je===ue?Dd:{}}},bt)),[je,fe,bt]),vt=a((()=>t.createElement("div",{style:{backgroundColor:P}},t.createElement("div",{style:{height:se(g)-1}},t.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",WebkitTransform:"translate(-50%, -50%)",msTransform:"translate(-50%, -50%)"}},t.createElement(p,{size:"m"},t.createElement(m,{textAlign:"center"},t.createElement(f,{size:"large"})),t.createElement(m,{fontWeight:"light",variant:"h1"},"Connecting")))))),[g]);return t.createElement("div",{id:"dcv-container",style:Bd},w&&!ge?vt:Ue("visible")&&yt,t.createElement("div",{style:{display:w&&!ge?"none":"block",backgroundColor:P}},t.createElement("div",{id:"dcv-display-frame",style:{height:Ra(g),width:Ta(g),overflow:Ce.scaleToFit?"hidden":"auto"}},t.createElement("div",{id:"dcv-display",style:Ad})),t.createElement("div",{id:"dcv-resource",tabIndex:"-1"}),t.createElement("div",{id:"soft-kbd-div",style:{position:"absolute",top:0,zIndex:-1e3}})))}function Wd(e){return-1!==["available","active"].indexOf(e)}function Vd(){null!==$d&&(za($d),$d=null)}function qd(e){return t.createElement("div",{style:Ld},e)}function Hd(e){if(null===e){const e=Nd.indexOf(_d);-1!==e&&Nd.splice(e,1)}_d=e}function Gd(){return _d}zd.propTypes={isPrimary:u.bool,connection:u.object,copyEnabled:u.bool,pasteEnabled:u.bool,window:u.object,appearanceMode:u.oneOf(["System default","Light mode","Dark mode"]),toolbarBehavior:u.oneOf([le,ue,pe]),uiConfig:u.exact({toolbar:u.exact({visible:u.bool,fullscreenButton:u.bool,multimonitorButton:u.bool})})};var Qd=n(zd);let Kd=te.getLogger("License Handler"),Yd=null;function Zd(e){let t=365,n="",r={};e.licenses.forEach((e=>{e.isDemo&&Kd.info(`License status: product '${e.product}' is using a demo license (${e.leftDays} days left)`),e.leftDays>0&&e.leftDays<t&&(t=e.leftDays,n=e.product)})),0===e.numUnlicensed?(Kd.debug(`License status: ${e.licenses.length} products licensed`),r.level=_a.INFO,"demo"===e.licensingMode&&t<7?r.header="DCV demo license.":r.header="DCV license.",t<7?(Kd.info(`License status: product '${n}' will expire in ${t} days`),r.description=`License of '${n}' will expire in ${t} days.`):"demo"===e.licensingMode&&(r.description="DCV is running with a demo license.")):(Kd.warn(`License error (mode: ${e.licensingMode}), ${e.numUnlicensed}/${e.licenses.length} products unlicensed: ${JSON.stringify(e.licenses)}`),r.header="No license available.","ec2"===e.licensingMode?(r.level=_a.WARNING,r.description="Please, check your EC2 configuration.",null!==e.documentationUrl&&""!==e.documentationUrl&&(r.actions={},r.actions.accept={text:"See documentation",callback:()=>{const t=document.createElement("a");t.href=e.documentationUrl,t.target="_blank",t.click()}})):(r.level=_a.ERROR,r.description="Please, contact the administrator.")),r.description&&(Yd=Ua(r,Yd))}let Jd=te.getLogger("printer");function Xd(e){Ua({level:_a.INFO,header:"File printed.",description:`${e.id} has been converted in printable format.`,actions:{accept:{text:"Download",callback:()=>{return t=e,Jd.debug(`Accepting print resource ${t.id}`),void t.accept({disposition:"attachment"});var t},remove:!0},decline:{text:"Decline",callback:()=>{return t=e,Jd.debug(`Removing print resource ${t.id}`),void t.decline();var t},remove:!0}}}),Jd.debug(`Added printer notification for resource ${e.id}`)}let eu,tu,nu=te.getLogger("UI Main");function ru(n){const[i,a]=t.useState(null),s=o(i),c=e=>{ne(n.dcv.onDisconnect)&&n.dcv.onDisconnect(e),s.current=null},l=e=>{let t,n=`${re(e.namespace)?"":`${e.namespace}::`}${e.name}`;0!==Ce.customChannels.length&&-1!==(()=>{let t=[];return Ce.customChannels.forEach((n=>{if(re(e.namespace)){let e=n.split("::",2);t.push(e[e.length-1])}else t.push(n)})),t})().indexOf(n)?i.openChannel(e.name,e.authToken,{onMessageReceived:e=>{nu.info(`[UI] Custom channel: received message ${new TextDecoder("utf-8").decode(e)}`),t(e)},onClose:e=>nu.info(`[UI] Custom channel closed: ${JSON.stringify(e)}`)},e.namespace).then((e=>{nu.info(`[UI] Opened custom channel ${e.channelName}`),t=t=>{e.sendMessage(t).then((()=>{nu.info("[UI] Success sending message.")})).catch((e=>{nu.error(`Failed to send message: ${JSON.stringify(e)}`)}))}})).catch((e=>{nu.error(`Failed to open custom channel: ${e.message}`)})):nu.info(`[UI] Custom channel '${n}' not supported`)},d=()=>{nu.info("[UI][Main] Calling client.connect"),e.connect({url:n.dcv.serverUrl,sessionId:n.dcv.sessionId,authToken:n.dcv.authToken,enabledChannels:Ce.enabledChannels,displayCodecs:Ce.displayCodecs,divId:"dcv-display",showDebugLayer:Ce.debugLayer,clientHiDpiScaling:Ce.clientHiDpiScaling,enableWebCodecs:Ce.enableWebCodecs,highColorAccuracy:Ce.highColorAccuracy,losslessColorspace:Ce.losslessColorspace,baseUrl:n.dcv.baseUrl,resourceBaseUrl:n.dcv.resourceBaseUrl||"",extensionData:n.dcv.extensionData||"",volumeLevel:Ce.volume,audioBitrate:Ce.audioBitrate,fingerRadius:Ce.fingerRadius,clipboardAutoSync:!0,dynamicAudioTuning:!0,observers:{displayLayout:(e,t,n)=>{Y.emit("display-layout",e,t,n)},firstFrame:(e,t,n)=>{Y.emit("first-frame",e,t,n)},displayAvailability:(e,t)=>{Y.emit("display-availability",e,t)},disconnect:c,licenseNotification:Zd,idleWarningNotification:e=>{!function(e){let t;e?(t=`DCV connection is idle and is going to be disconnected at ${e.toString()}`,nu.info(t),eu=Ua({level:_a.WARNING,header:"Idle timeout.",description:t,actions:{dismissable:!0}},eu)):eu&&(za(eu),eu=null)}(e)},dataChannel:e=>{Y.emit("custom-channel",e)},filePrinted:e=>{Xd(e)},fileDownload:e=>{Y.emit("file-download",e)},qualityIndicatorState:e=>{nu.info(`Quality Indicators: ${JSON.stringify(e)}`),function(e){let n=0,r=[],o="Quality status update.";switch(e.indicators.forEach((e=>{r.push(t.createElement(m,{key:e.name},`${e.name.replace("_"," ")} status: ${e.status}`)),e.changed&&nu.info(`[UI] Indicator ${e.name} has changed to status ${e.status}`),e.status>n&&(n=e.status)})),nu.info(`[UI] Current Quality Indicator overall alarm state: ${n}`),n){case 1:tu=Ua({level:_a.WARNING,header:o,description:r,actions:{dismissable:!0}},tu);break;case 2:tu=Ua({level:_a.ERROR,header:o,description:r,actions:{dismissable:!0}},tu);break;default:tu&&(za(tu),tu=null)}}(e)},filestorageEnabled:e=>{Y.emit("filestorage-enabled",e)},clipboardEvent:e=>{Y.emit("clipboard",e)},deviceChangeEvent:function(){Y.emit("device-change")},featuresUpdate:Ae,screenshot:e=>{Y.emit("screenshot",e)},collaboratorList:e=>{$l(e)}}}).then((e=>{a(e),s.current=e,document.title=`${e.getServerInfo().hostname} - NICE DCV`})).catch((e=>{nu.error(`[UI][Main] client.connect was rejected (${e.message})`),ne(n.dcv.onDisconnect)&&n.dcv.onDisconnect(e.message),s.current=null}))};return r((()=>{n.dcv.sessionId&&n.dcv.authToken&&!i&&(te.setLevel(n.dcv.logLevel),d())}),[n.dcv.sessionId,n.dcv.authToken]),r((()=>()=>{nu.info("[UI][Main] Calling connection.disconnect"),s.current&&s.current.disconnect()}),[]),r((()=>(Y.on("custom-channel",l),()=>{Y.off("custom-channel",l)})),[i]),t.createElement(Qd,{isPrimary:!0,connection:i,window:window,uiConfig:n.uiConfig})}ru.propTypes={dcv:u.exact({sessionId:u.string.isRequired,authToken:u.string.isRequired,serverUrl:u.string.isRequired,baseUrl:u.string.isRequired,resourceBaseUrl:u.string,extensionData:u.string,onDisconnect:u.func,logLevel:u.oneOf(Object.values(te.levels))}).isRequired,uiConfig:u.exact({toolbar:u.exact({visible:u.bool,fullscreenButton:u.bool,multimonitorButton:u.bool})})};export{ru as DCVViewer};
